{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/snippets/user-gif-img-simple.html","webpack:///./src/snippets/compute-style-loop.txt","webpack:///./src/Content.vue?0713","webpack:///./src/snippets/merge-gif-and-caption.txt","webpack:///./src/snippets/gif-loader.html","webpack:///./src/snippets/gif-draw-canvas.html","webpack:///./src/snippets/captionImg.html","webpack:///./src/CodeSnippet.vue?93be","webpack:///./src/snippets/onRecordButtonClicked.html","webpack:///./src/App.vue?31b6","webpack:///./src/Content.vue?600b","webpack:///./src/CodeSnippet.vue?db26","webpack:///src/CodeSnippet.vue","webpack:///./src/CodeSnippet.vue?9dfd","webpack:///./src/CodeSnippet.vue?171e","webpack:///./src/inlineSVGStyle.js","webpack:///./src/gif.worker.txt","webpack:///src/Content.vue","webpack:///./src/Content.vue?d0cb","webpack:///./src/Content.vue?dfba","webpack:///./src/SocialSharingBadges.vue?5070","webpack:///src/SocialSharingBadges.vue","webpack:///./src/SocialSharingBadges.vue?b8c8","webpack:///./src/SocialSharingBadges.vue?4f43","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/SocialSharingBadges.vue?5bee","webpack:///./src/snippets/onRecordButtonClicked.txt","webpack:///./src/snippets/inline-styles.txt","webpack:///./src/snippets/text-with-classes.txt","webpack:///./src/snippets/gif-loader.txt","webpack:///./src/snippets/animated-svg.html","webpack:///./src/snippets/caption-svg-base.html","webpack:///./src/snippets/animate-example.html","webpack:///./src/snippets/recording-main-loop.txt","webpack:///./src/snippets/computed-style.txt","webpack:///./src/snippets/project-img-onto-canvas.txt","webpack:///./src/snippets/clock-js.txt","webpack:///./src/snippets/text-with-styles.txt","webpack:///./src/snippets/render-gif.txt","webpack:///./src/snippets/caption.css.txt","webpack:///./src/snippets/gif-draw-canvas.txt","webpack:///./src/snippets/captionImgSrc.txt"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_m","staticStyle","staticRenderFns","staticClass","_v","directives","rawName","expression","domProps","on","$event","target","composing","gifURL","onGifLoad","gifWidth","gifHeight","caption","style","width","height","captionX","captionY","_s","timeSeconds","toFixed","_e","formattedCaptionSource","captionImgSrc","isRecording","isRendering","onRecordButtonClicked","renderedGif","snippets","language","content","props","console","error","components","VueCodeHighlight","component","computedStyle","node","computedStyles","getComputedStyle","includedAttributes","values","filter","indexOf","map","getPropertyValue","join","cloneWithInlineStyle","newNode","cloneNode","some","tagName","setAttribute","firstChild","removeChild","hasChildNodes","child","nodeType","nodeName","appendChild","nextSibling","gifDurationSeconds","frameSeconds","showCaption","elements","captionSource","gifRenderer","CodeSnippet","methods","setCaptionSource","outerHTML","workers","workerScript","quality","fps","self","reader","readAsDataURL","blob","onloadend","computed","mounted","setInterval","newTime","render","gifImg","document","getElementById","animatedCaption","captionImg","finalCanvas","gifDrawCanvasContext","drawImage","watch","frameData","context","frame","canvas","addFrame","copy","delay","Math","floor","_l","network","backgroundColor","color","sharing","url","title","description","quote","hashtags","twitterUser","class","icon","networks","Content","SocialSharingBadges","Vue","use","VueSocialSharing","config","productionTip","h","App","$mount"],"mappings":"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","file":"js/app.e9986dc3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/gif-captioning-with-css/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export default \"<input v-model=\\\"gifURL\\\"/>\\n<img :src=\\\"gifURL\\\"/>\";","export default \" watch: {\\n  timeSeconds(t) {\\n    const node = inlineSVGStyle.cloneWithInlineStyle(\\n      this.elements.animatedCaption\\n    );\\n    this.captionSource = node.outerHTML;\\n  }\\n}\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content.vue?vue&type=style&index=0&lang=css&\"","export default \"watch: {\\n  timeSeconds(t) {\\n    const node = inlineSVGStyle.cloneWithInlineStyle(\\n        this.elements.animatedCaption\\n      );\\n    this.captionSource = node.outerHTML;\\n    const { finalCanvas, captionImg } = this.elements;\\n    const frame = this.frameData.find(frame => frame.untilTime >= t);\\n    const context = finalCanvas.getContext('2d');\\n    context.drawImage(frame.canvas, 0, 0);\\n    context.drawImage(captionImg, 0, 0);\\n  }\\n}\";","export default \"<img :src=\\\"gifURL\\\" @load=\\\"onGifLoad\\\"/>\";","export default \"<canvas id='gif-draw-canvas' :width='gifWidth' :height='gifHeight'></canvas>\";","export default \"<img src=\\\"caption-img\\\" :src=\\\"captionImgSrc\\\" :width=\\\"gifWidth\\\" />\";","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeSnippet.vue?vue&type=style&index=0&lang=css&\"","export default \"<button\\n    @click='onRecordButtonClicked'\\n    :disabled='isRecording || isRendering'\\n> Render the gif\\n</button>\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('page-content'),_vm._m(0),_c('social-sharing-badges',{staticStyle:{\"margin-top\":\"3em\"}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"footer\"},[_vm._v(\"Copyright Zulko 2021 - This page's code is \"),_c('a',{attrs:{\"href\":\"https://github.com/Zulko/gif-captioning-with-css\"}},[_vm._v(\"on Github\")]),_vm._v(\" and published under the MIT licence. The page is styled with \"),_c('a',{attrs:{\"href\":\"https://picocss.com/\"}},[_vm._v(\"PicoCSS\")]),_vm._v(\" which works great. If you know other people who are into GIFs and CSS, consider sharing!\")])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"In-browser GIF captioning with 3D CSS animations\")]),_c('p',[_vm._v(\"In this page we'll create a GIF with a caption using 3D CSS animations generated by your browser! And we'll see a few particularities of browser SVG rendering along the way. \")]),_c('img',{attrs:{\"src\":\"finalResult.gif\"}}),_c('h3',[_vm._v(\"TLDR; The plan\")]),_vm._m(0),_c('img',{staticStyle:{\"max-width\":\"300px\"},attrs:{\"src\":\"the-plan.png\"}}),_c('h3',[_vm._v(\"1. The GIF\")]),_c('p',[_vm._v(\"Enter a URL below or just leave the default: \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.gifURL),expression:\"gifURL\"}],domProps:{\"value\":(_vm.gifURL)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.gifURL=$event.target.value}}}),_c('img',{attrs:{\"id\":\"gif-img\",\"src\":_vm.gifURL},on:{\"load\":_vm.onGifLoad}}),_c('p'),_vm._m(1),_c('p'),_c('code-snippet',{attrs:{\"name\":\"user-gif-img-simple\"}}),_c('h3',[_vm._v(\"2. Extracting frames from the GIF\")]),_c('p'),_vm._m(2),_c('p'),_c('code-snippet',{attrs:{\"name\":\"project-img-onto-canvas\"}}),_c('p'),_vm._m(3),_c('p'),_c('code-snippet',{attrs:{\"name\":\"gif-draw-canvas-html\"}}),_c('code-snippet',{attrs:{\"name\":\"gif-draw-canvas-js\"}}),_c('p'),_vm._m(4),_c('p'),_c('center',[_c('canvas',{attrs:{\"id\":\"gif-draw-canvas\",\"width\":_vm.gifWidth,\"height\":_vm.gifHeight}})]),_c('p'),_vm._m(5),_c('p'),_c('code-snippet',{attrs:{\"name\":\"gif-loader-html\"}}),_c('code-snippet',{attrs:{\"name\":\"gif-loader-js\"}}),_c('p',[_vm._v(\"Now we have extracted each frame's canvas with the time at which they appear, and in the process we gleaned the GIF's width, height and duration. \")]),_c('h3',[_vm._v(\"3. The caption\")]),_c('p',[_vm._v(\"Enter a caption below (or just leave the default): \")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.caption),expression:\"caption\"}],attrs:{\"mode\":\"text\"},domProps:{\"value\":(_vm.caption)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.caption=$event.target.value}}}),_c('p'),_vm._m(6),_c('p'),_c('code-snippet',{attrs:{\"name\":\"caption-svg-base\"}}),_c('code-snippet',{attrs:{\"name\":\"caption-css\"}}),_c('svg',{staticClass:\"with-border\",style:({width: _vm.gifWidth, height: _vm.gifHeight}),attrs:{\"viewBox\":(\"0 0 \" + _vm.gifWidth + \" \" + _vm.gifHeight),\"width\":_vm.gifWidth,\"height\":_vm.gifHeight}},[_c('g',{style:((\"transform: translate(\" + _vm.captionX + \"px, \" + _vm.captionY + \"px)\"))},[_c('text',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.caption))])])]),_c('h3',[_vm._v(\"4. Animating the caption\")]),_c('p',[_vm._v(\"First we'll create our clock, a time variable that loops through the duration of the GIF: \")]),_c('code-snippet',{attrs:{\"name\":\"clock-js\"}}),_c('code-snippet',{attrs:{\"name\":\"clock-html\"}}),_c('center',[_c('p',[_vm._v(\"Current time: \"+_vm._s(_vm.timeSeconds.toFixed(2))+\" seconds\")])]),_c('p',[_vm._v(\"Now we can make the caption blink on and off with a simple Vue condition:\")]),_c('code-snippet',{attrs:{\"name\":\"caption-blink-html\"}}),_c('svg',{staticClass:\"with-border\",style:({width: _vm.gifWidth, height: _vm.gifHeight}),attrs:{\"viewBox\":(\"0 0 \" + _vm.gifWidth + \" \" + _vm.gifHeight),\"width\":_vm.gifWidth,\"height\":_vm.gifHeight}},[_c('g',{style:((\"transform: translate(\" + _vm.captionX + \"px, \" + _vm.captionY + \"px)\"))},[(_vm.timeSeconds > 0.5 && _vm.timeSeconds < 2)?_c('text',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.caption))]):_vm._e()])]),_vm._m(7),_c('code-snippet',{attrs:{\"name\":\"animate-example-css\"}}),_c('code-snippet',{attrs:{\"name\":\"animate-example\"}}),_c('center',[_c('div',{staticStyle:{\"display\":\"block\",\"text-align\":\"center\",\"width\":\"200px\",\"height\":\"50px\"}},[_c('h4',{staticClass:\"animate__animated animate__heartBeat animate__infinite\"},[_vm._v(\"BOOM\")])])]),_c('p'),_vm._m(8),_c('p'),_c('code-snippet',{attrs:{\"name\":\"animated-svg\"}}),_c('p',[_vm._v(\"The result will look slighlty different on Chrome/Firefox/Safari, as each browser handles 3D CSS transforms differently: \")]),_c('svg',{staticClass:\"with-border\",style:({width: _vm.gifWidth, height: _vm.gifHeight}),attrs:{\"id\":\"animated-caption\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":(\"0 0 \" + _vm.gifWidth + \" \" + _vm.gifHeight),\"width\":_vm.gifWidth,\"height\":_vm.gifHeight}},[_c('g',{style:((\"transform: translate(\" + _vm.captionX + \"px, \" + _vm.captionY + \"px)\"))},[_c('transition',{attrs:{\"enter-active-class\":\"animate__animated animate__jackInTheBox animate__flipInX\",\"leave-active-class\":\"animate__animated animate__backOutUp\"}},[(_vm.timeSeconds > 0.5 && _vm.timeSeconds < 2)?_c('text',{staticClass:\"caption\"},[_vm._v(_vm._s(_vm.caption))]):_vm._e()])],1)]),_c('p',[_vm._v(\"And just like that, we have our animation. \")]),_c('h3',[_vm._v(\"5. The hard part: SVG snapshots\")]),_c('p'),_c('p',[_vm._v(\"Your browser has two very distinct ways of displaying SVG images:\")]),_vm._m(9),_vm._m(10),_c('p',[_vm._v(\"The first step will be to go from the original SVG definition, which looks like this:\")]),_c('p'),_c('code-snippet',{attrs:{\"name\":\"text-with-classes\"}}),_c('p'),_vm._m(11),_c('p'),_c('code-snippet',{attrs:{\"name\":\"text-with-styles\"}}),_c('p'),_vm._m(12),_c('p'),_c('code-snippet',{attrs:{\"name\":\"computed-style\"}}),_c('p'),_vm._m(13),_c('p'),_c('code-snippet',{attrs:{\"name\":\"inline-style\"}}),_c('p',[_vm._v(\"Now let's record the computed style of the SVG above at every tick of the clock:\")]),_c('code-snippet',{attrs:{\"name\":\"compute-style-loop\"}}),_vm._m(14),_c('pre',[_c('code',{staticClass:\"caption-source\"},[_vm._v(_vm._s(_vm.formattedCaptionSource))])]),_c('p'),_vm._m(15),_c('p'),_c('code-snippet',{attrs:{\"name\":\"captionImgSrc\"}}),_c('code-snippet',{attrs:{\"name\":\"captionImg-html\"}}),_c('p'),_vm._m(16),_c('p'),_c('img',{attrs:{\"id\":\"caption-img\",\"src\":_vm.captionImgSrc,\"width\":_vm.gifWidth}}),_c('p'),_vm._m(17),_vm._m(18),_c('p'),_c('h3',[_vm._v(\"GIF and caption come together\")]),_c('p'),_vm._m(19),_c('p'),_c('code-snippet',{attrs:{\"name\":\"merge-gif-and-caption\"}}),_c('center',[_c('canvas',{attrs:{\"id\":\"final-canvas\",\"width\":_vm.gifWidth,\"height\":_vm.gifHeight}})]),_c('h3',[_vm._v(\"Final step: rendering the GIF\")]),_c('p'),_vm._m(20),_c('p',[_vm._v(\"For this demo we'll have the renderer's creation triggered with a button.\")]),_c('p'),_c('code-snippet',{attrs:{\"name\":\"onRecordButtonClicked-html\"}}),_c('p'),_vm._m(21),_c('p'),_c('code-snippet',{attrs:{\"name\":\"onRecordButtonClicked\"}}),_c('code-snippet',{attrs:{\"name\":\"rendered-gif-html\"}}),_c('p',[_vm._v(\"Then we modify the main loop so that every frame gets sent to the GIF renderer:\")]),_c('code-snippet',{attrs:{\"name\":\"recording-main-loop\"}}),_c('p',[_vm._v(\"And when the GIF has played once in its entirety, the frame recording stops, and the renderer can start actually generating the GIF. We do so by modifying the clock's loop: \")]),_c('code-snippet',{attrs:{\"name\":\"render-gif\"}}),_vm._m(22),_c('center',[_c('button',{attrs:{\"disabled\":_vm.isRecording || _vm.isRendering},on:{\"click\":_vm.onRecordButtonClicked}},[_vm._v(\"Render the gif\")])]),(_vm.isRecording)?_c('p',[_vm._v(\"Recording the frames...\")]):_vm._e(),(_vm.isRendering)?_c('p',[_vm._v(\"Rendering the GIF (may hang on mobile phones)...\")]):_vm._e(),(_vm.renderedGif && !(_vm.isRecording || _vm.isRendering))?_c('p',[_vm._v(\"Here's your rendered GIF!\")]):_vm._e(),(_vm.renderedGif)?_c('img',{attrs:{\"id\":\"rendered-gif\",\"src\":_vm.renderedGif}}):_vm._e(),_c('h3',[_vm._v(\"Conclusion\")]),_c('p'),_c('p',[_vm._v(\"It is fascinating that browsers and JS frameworks have evolved to the point where styling a GIF with CSS is possible. Some time ago I started developing a browser-based GIF captioning app around this trick, but as the project went forward I realized the lack of font support and differences in 3D CSS rendering between browsers were going to be a pain. So I removed the CSS animation feature altogether, and created this demo page instead.\")]),_vm._m(23),_c('p')],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"We will first load a GIF from the internet, and separately create a CSS-animated caption in SVG format. Every few milliseconds, we'll extract a frame from the GIF (we'll just use a library for that), and a snapshot from the animated SVG caption (that's the hard part!). Then we'll combine GIF and caption on a canvas, and send the final frames to \"),_c('a',{attrs:{\"href\":\"https://jnordberg.github.io/gif.js/\"}},[_vm._v(\"GIF.js\")]),_vm._v(\" for GIF generation. \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"I'll try to be transparent with what's running behind the scenes. This page (full code \"),_c('a',{attrs:{\"href\":\"https://github.com/Zulko/gif-captioning-with-css/blob/main/src/Content.vue\"}},[_vm._v(\"here\")]),_vm._v(\") is written using the VueJS framework, which provides easy ways to manage events, variables and CSS classes, but could totally be replaced by React or basic Javascript for this demo. Here is the code for the text input field and image above:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"If you want to project the content of an \"),_c('code',[_vm._v(\"<img>\")]),_vm._v(\" onto a HTML canvas, you'll use the \"),_c('code',[_vm._v(\"drawImage\")]),_vm._v(\" method:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Even better, if you want to project the current frame of a \"),_c('code',[_vm._v(\"<video>\")]),_vm._v(\", you'll simply write \"),_c('code',[_vm._v(\"drawImage(myVideo)\")]),_vm._v(\". Now let's try the same technique to extract frames from the GIF above:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"It just doesn't work, the \"),_c('code',[_vm._v(\"<canvas>\")]),_vm._v(\" keeps showing the GIF's first frame:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"That's because when applying \"),_c('code',[_vm._v(\"drawImage\")]),_vm._v(\", your browser will consider the GIF as an image file, look at the data, extract the first frame (it doesn't know which frame is currently playing on the page ), and draw it. The only workaround is to use a library like \"),_c('a',{attrs:{\"href\":\"https://www.npmjs.com/package/gif-frames\"}},[_vm._v(\"gif-frames\")]),_vm._v(\" that will decode the GIF frames directly from the file, and draw them on separate canvas.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Let's embed this caption in a SVG tag with the same dimensions as the GIF. Note how I am placing the text using its parent group, rather than writing \"),_c('code',[_vm._v(\"<text x=100 y=100>\")]),_vm._v(\". This is so the animations can later be applied to the text only and not its coordinates.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Then we'll use \"),_c('a',{attrs:{\"href\":\"https://animate.style/\",\"target\":\"_blank\"}},[_vm._v(\"Animate.css\")]),_vm._v(\", a very practical CSS library with dozens of predefined animations. All you have to do is load the library and give a certain class to an element: \")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"This will work particularly well with the VueJS framework, which lets you specify \"),_c('code',[_vm._v(\"<transition>\")]),_vm._v(\" classes for when your element appears and disappears:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('ul',[_c('li',[_vm._v(\"If the SVG is defined using a \"),_c('code',[_vm._v(\"<svg>\")]),_vm._v(\" tag, the browser considers the SVG and its components (\"),_c('code',[_vm._v(\"<text>\")]),_vm._v(\", \"),_c('code',[_vm._v(\"<g>\")]),_vm._v(\") as first-class components of the page: it will apply CSS properties (including CSS animations, and custom fonts loaded in the page), it can let you select the elements with the mouse, etc. The downside is that you can't draw these elements on a canvas with \"),_c('code',[_vm._v(\"drawImage()\")])]),_c('li',[_vm._v(\"If the SVG is loaded as \"),_c('code',[_vm._v(\"<image src='some.svg'/>\")]),_vm._v(\", the browser will render it using a separate SVG engine (which can understand CSS styles, but won't know CSS classes and animations defined in the page), and display the image's pixels in the browser. These can then be projected on a canvas with \"),_c('code',[_vm._v(\"drawImage()\")]),_vm._v(\".\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"See where this is going? We'll start from the animated \"),_c('code',[_vm._v(\"<svg>\")]),_vm._v(\" element above, and take SVG \\\"snapshots\\\" that we'll feed to a \"),_c('code',[_vm._v(\"<img src=...>\")]),_vm._v(\" element, so that they are canvas-compatible.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"And transform it so that it explicitly features the transformations the browser is applying to the \"),_c('code',[_vm._v(\"<text>\")]),_vm._v(\" at a given time point, and looks like this:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_c('a',{attrs:{\"href\":\"https://toucantoco.com/en/tech-blog/tech/capture-your-html\"}},[_vm._v(\"This great blog post\")]),_vm._v(\" by Sophie Despeisse provides a function to capture all the browser-computed styles of a SVG. It is done in two parts. First you ask for computed styles via the browser's \"),_c('code',[_vm._v(\"getComputedStyle\")]),_vm._v(\" method:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Then you apply the method above recursively to all the components of your SVG (\"),_c('code',[_vm._v(\"<g>\")]),_vm._v(\", \"),_c('code',[_vm._v(\"<text>\")]),_vm._v(\", etc):\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Here is a rendition of \"),_c('code',[_vm._v(\"captionSource\")]),_vm._v(\":\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"For our last step, we'll feed that whole text to an \"),_c('code',[_vm._v(\"<img/>\")]),_vm._v(\" tag as a \"),_c('em',[_vm._v(\"data URL\")]),_vm._v(\", which is of the form \"),_c('code',[_vm._v(\"src='data:image/svg+xml,$DATA'\")]),_vm._v(\". Note how the SVG data is sanitized (\"),_c('code',[_vm._v(\"'\")]),_vm._v(\" is replaced by its URL-equivalent \"),_c('code',[_vm._v(\"%22\")]),_vm._v(\") so it won't corrupt the file.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"And here is the final \"),_c('code',[_vm._v(\"<img/>\")]),_vm._v(\" whose \"),_c('code',[_vm._v(\"src\")]),_vm._v(\" is updated at each tick of the clock:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"If you don't have the \"),_c('a',{attrs:{\"href\":\"https://fonts.google.com/specimen/Anton\"}},[_c('em',[_vm._v(\"Anton\")])]),_vm._v(\" or \"),_c('em',[_vm._v(\"Impact\")]),_vm._v(\" font installed on your computer, you'll probably have a very different, \"),_c('em',[_vm._v(\"default\")]),_vm._v(\" font appear in the animation above. Again, this is because these pictures are generated by your browser using a separate SVG renderer which doesn't have access to the fonts loaded in this page. On the good news side, that renderer did take into account the 3D transforms, although 3D transforms are not officially part of the SVG standard.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"The (very useful) \"),_c('a',{attrs:{\"href\":\"https://www.npmjs.com/package/canvg\"}},[_vm._v(\"CanVG\")]),_vm._v(\" library will render SVGs on a canvas using fonts loaded in the page. However, CanVG is limited to the standard SVG definition, and so won't take into account 3D transforms.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"At each tick of the clock, we will now project, on a same \"),_c('code',[_vm._v(\"<canvas>\")]),_vm._v(\", the GIF frame corresponding to the current time, and the current caption from the \"),_c('code',[_vm._v(\"<img>\")]),_vm._v(\" above:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"There are a couple Javascript frameworks for generating GIFs. \"),_c('a',{attrs:{\"href\":\"https://jnordberg.github.io/gif.js/\"}},[_vm._v(\"GIF.js\")]),_vm._v(\" is my favorite. You first initialize a renderer, then send frames (images or canvas) to it, and finally trigger the GIF rendering.\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"When we create the renderer we set it up so that, upon completion, it writes the final GIF's data into a \"),_c('code',[_vm._v(\"renderedGif\")]),_vm._v(\" variable that is fed to an \"),_c('code',[_vm._v(\"<img>\")]),_vm._v(\" element:\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"That's it, we made it! Press the button! \"),_c('img',{staticClass:\"emoji\",attrs:{\"src\":\"https://emojis.slackmojis.com/emojis/images/1584725500/8268/blob-hype.gif\"}})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"On the bright side, this got me started on a new GIF editor that runs entirely in your browser, enables all kinds of GIF mixing and cropping and captioning and animating, and lets you share your projects for others to remix. It's called \"),_c('a',{attrs:{\"href\":\"https://zulko.github.io/gix\"}},[_vm._v(\"Gix and you should totally check it out\")]),_vm._v(\".\")])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"code-snippet\"},[_c('div',{staticClass:\"description\"},[_vm._v(\"in \"+_vm._s(_vm.snippets[_vm.name].language)+\":\")]),_c('vue-code-highlight',{attrs:{\"language\":_vm.snippets[_vm.name].language}},[_vm._v(_vm._s(_vm.snippets[_vm.name].content))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n.code-snippet\n  .description in {{snippets[name].language}}:\n  vue-code-highlight(\n    :language='snippets[name].language'\n  ) {{ snippets[name].content }}\n</template>\n\n<script>\nimport { component as VueCodeHighlight } from 'vue-code-highlight';\nimport 'vue-code-highlight/themes/prism-okaidia.css';\n\nconst snippets = {\n  'animate-example': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/animate-example.html').default,\n  },\n  'animate-example-css': {\n    language: 'CSS',\n    content:\n      \"@import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');\",\n  },\n  'animated-svg': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/animated-svg.html').default,\n  },\n  'caption-svg-base': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/caption-svg-base.html').default,\n  },\n  'caption-css': {\n    language: 'CSS',\n    content: require('raw-loader!./snippets/caption.css.txt').default,\n  },\n  'caption-blink-js': {\n    language: 'Javascript',\n    content:\n      'mounted() { setInterval(() => {showCaption = !showCaption}, 2000)}',\n  },\n  'caption-blink-html': {\n    language: 'HTML',\n    content:\n      \"<text class='caption' v-if='timeSeconds > 0.5 && timeSeconds < 2'> {{ caption }} </text>\",\n  },\n  captionImgSrc: {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/captionImgSrc.txt').default,\n  },\n  'captionImg-html': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/captionImg.html').default,\n  },\n  'clock-html': {\n    language: 'HTML',\n    content: 'Current time: {{ timeSeconds.toFixed(2) }} seconds',\n  },\n  'clock-js': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/clock-js.txt').default,\n  },\n  'computed-style': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/computed-style.txt').default,\n  },\n  'compute-style-loop': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/compute-style-loop.txt').default,\n  },\n  'gif-draw-canvas-html': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/gif-draw-canvas.html').default,\n  },\n  'gif-draw-canvas-js': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/gif-draw-canvas.txt').default,\n  },\n  'gif-loader-html': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/gif-loader.html').default,\n  },\n  'gif-loader-js': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/gif-loader.txt').default,\n  },\n  'inline-style': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/inline-styles.txt').default,\n  },\n  'merge-gif-and-caption': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/merge-gif-and-caption.txt').default,\n  },\n  onRecordButtonClicked: {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/onRecordButtonClicked.txt').default,\n  },\n  'onRecordButtonClicked-html': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/onRecordButtonClicked.html')\n      .default,\n  },\n  'project-img-onto-canvas': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/project-img-onto-canvas.txt')\n      .default,\n  },\n  'recording-main-loop': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/recording-main-loop.txt').default,\n  },\n  'rendered-gif-html': {\n    language: 'HTML',\n    content: \"<img :src='renderedGif'/>\",\n  },\n  'render-gif': {\n    language: 'Javascript',\n    content: require('raw-loader!./snippets/render-gif.txt').default,\n  },\n  'text-with-classes': {\n    language: 'SVG',\n    content: require('raw-loader!./snippets/text-with-classes.txt').default,\n  },\n  'text-with-styles': {\n    language: 'SVG',\n    content: require('raw-loader!./snippets/text-with-styles.txt').default,\n  },\n  'user-gif-img-simple': {\n    language: 'HTML',\n    content: require('raw-loader!./snippets/user-gif-img-simple.html').default,\n  },\n};\nexport default {\n  props: {\n    name: { type: String },\n  },\n  data() {\n    if (!snippets[this.name]) {\n      console.error(`${this.name} not in snippets`);\n    }\n    return {\n      snippets,\n    };\n  },\n  components: {\n    VueCodeHighlight,\n  },\n};\n</script>\n<style>\n.code-snippet .description {\n  color: gray;\n  margin-bottom: -1em;\n  font-style: italic;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeSnippet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeSnippet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CodeSnippet.vue?vue&type=template&id=127cac40&lang=pug&\"\nimport script from \"./CodeSnippet.vue?vue&type=script&lang=js&\"\nexport * from \"./CodeSnippet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CodeSnippet.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","function computedStyle(node) {\n  const computedStyles = getComputedStyle(node);\n  var includedAttributes = [\n    \"font-family\",\n    \"font-size\",\n    \"font-weight\",\n    \"fill\",\n    \"stroke\",\n    \"stroke-color\",\n    \"stroke-width\",\n    \"style\",\n    \"text-anchor\",\n    \"alignment-baseline\",\n    \"transform\",\n    \"transform-origin\",\n    \"perspective\",\n    \"perspective-origin\",\n    \"opacity\",\n  ];\n  return Object.values(computedStyles)\n    .filter((key) => includedAttributes.indexOf(key) >= 0)\n    .map((key) => `${key}:${computedStyles.getPropertyValue(key)};`)\n    .join(\"\");\n}\n\nfunction cloneWithInlineStyle(node) {\n  var newNode = node.cloneNode(false);\n  if (![\"defs\", \"style\"].some((tagName) => tagName === node.tagName)) {\n    newNode.setAttribute(\"style\", computedStyle(node));\n  }\n  while (newNode.firstChild) {\n    newNode.removeChild(newNode.firstChild);\n  }\n  if (node && node.hasChildNodes()) {\n    var child = node.firstChild;\n    while (child) {\n      if (child.nodeType === 1 && child.nodeName !== \"SCRIPT\") {\n        newNode.appendChild(cloneWithInlineStyle(child));\n      } else {\n        newNode.appendChild(child.cloneNode());\n      }\n      child = child.nextSibling;\n    }\n  }\n  return newNode;\n}\n\nexport default {\n  cloneWithInlineStyle,\n};\n","export default \"data:text/plain;charset=utf-8;base64,Ly8gZ2lmLndvcmtlci5qcyAwLjIuMCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9qbm9yZGJlcmcvZ2lmLmpzCihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK28rIiciKTt0aHJvdyBmLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBOZXVRdWFudD1yZXF1aXJlKCIuL1R5cGVkTmV1UXVhbnQuanMiKTt2YXIgTFpXRW5jb2Rlcj1yZXF1aXJlKCIuL0xaV0VuY29kZXIuanMiKTtmdW5jdGlvbiBCeXRlQXJyYXkoKXt0aGlzLnBhZ2U9LTE7dGhpcy5wYWdlcz1bXTt0aGlzLm5ld1BhZ2UoKX1CeXRlQXJyYXkucGFnZVNpemU9NDA5NjtCeXRlQXJyYXkuY2hhck1hcD17fTtmb3IodmFyIGk9MDtpPDI1NjtpKyspQnl0ZUFycmF5LmNoYXJNYXBbaV09U3RyaW5nLmZyb21DaGFyQ29kZShpKTtCeXRlQXJyYXkucHJvdG90eXBlLm5ld1BhZ2U9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VzWysrdGhpcy5wYWdlXT1uZXcgVWludDhBcnJheShCeXRlQXJyYXkucGFnZVNpemUpO3RoaXMuY3Vyc29yPTB9O0J5dGVBcnJheS5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbigpe3ZhciBydj0iIjtmb3IodmFyIHA9MDtwPHRoaXMucGFnZXMubGVuZ3RoO3ArKyl7Zm9yKHZhciBpPTA7aTxCeXRlQXJyYXkucGFnZVNpemU7aSsrKXtydis9Qnl0ZUFycmF5LmNoYXJNYXBbdGhpcy5wYWdlc1twXVtpXV19fXJldHVybiBydn07Qnl0ZUFycmF5LnByb3RvdHlwZS53cml0ZUJ5dGU9ZnVuY3Rpb24odmFsKXtpZih0aGlzLmN1cnNvcj49Qnl0ZUFycmF5LnBhZ2VTaXplKXRoaXMubmV3UGFnZSgpO3RoaXMucGFnZXNbdGhpcy5wYWdlXVt0aGlzLmN1cnNvcisrXT12YWx9O0J5dGVBcnJheS5wcm90b3R5cGUud3JpdGVVVEZCeXRlcz1mdW5jdGlvbihzdHJpbmcpe2Zvcih2YXIgbD1zdHJpbmcubGVuZ3RoLGk9MDtpPGw7aSsrKXRoaXMud3JpdGVCeXRlKHN0cmluZy5jaGFyQ29kZUF0KGkpKX07Qnl0ZUFycmF5LnByb3RvdHlwZS53cml0ZUJ5dGVzPWZ1bmN0aW9uKGFycmF5LG9mZnNldCxsZW5ndGgpe2Zvcih2YXIgbD1sZW5ndGh8fGFycmF5Lmxlbmd0aCxpPW9mZnNldHx8MDtpPGw7aSsrKXRoaXMud3JpdGVCeXRlKGFycmF5W2ldKX07ZnVuY3Rpb24gR0lGRW5jb2Rlcih3aWR0aCxoZWlnaHQpe3RoaXMud2lkdGg9fn53aWR0aDt0aGlzLmhlaWdodD1+fmhlaWdodDt0aGlzLnRyYW5zcGFyZW50PW51bGw7dGhpcy50cmFuc0luZGV4PTA7dGhpcy5yZXBlYXQ9LTE7dGhpcy5kZWxheT0wO3RoaXMuaW1hZ2U9bnVsbDt0aGlzLnBpeGVscz1udWxsO3RoaXMuaW5kZXhlZFBpeGVscz1udWxsO3RoaXMuY29sb3JEZXB0aD1udWxsO3RoaXMuY29sb3JUYWI9bnVsbDt0aGlzLm5ldVF1YW50PW51bGw7dGhpcy51c2VkRW50cnk9bmV3IEFycmF5O3RoaXMucGFsU2l6ZT03O3RoaXMuZGlzcG9zZT0tMTt0aGlzLmZpcnN0RnJhbWU9dHJ1ZTt0aGlzLnNhbXBsZT0xMDt0aGlzLmRpdGhlcj1mYWxzZTt0aGlzLmdsb2JhbFBhbGV0dGU9ZmFsc2U7dGhpcy5vdXQ9bmV3IEJ5dGVBcnJheX1HSUZFbmNvZGVyLnByb3RvdHlwZS5zZXREZWxheT1mdW5jdGlvbihtaWxsaXNlY29uZHMpe3RoaXMuZGVsYXk9TWF0aC5yb3VuZChtaWxsaXNlY29uZHMvMTApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXRGcmFtZVJhdGU9ZnVuY3Rpb24oZnBzKXt0aGlzLmRlbGF5PU1hdGgucm91bmQoMTAwL2Zwcyl9O0dJRkVuY29kZXIucHJvdG90eXBlLnNldERpc3Bvc2U9ZnVuY3Rpb24oZGlzcG9zYWxDb2RlKXtpZihkaXNwb3NhbENvZGU+PTApdGhpcy5kaXNwb3NlPWRpc3Bvc2FsQ29kZX07R0lGRW5jb2Rlci5wcm90b3R5cGUuc2V0UmVwZWF0PWZ1bmN0aW9uKHJlcGVhdCl7dGhpcy5yZXBlYXQ9cmVwZWF0fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXRUcmFuc3BhcmVudD1mdW5jdGlvbihjb2xvcil7dGhpcy50cmFuc3BhcmVudD1jb2xvcn07R0lGRW5jb2Rlci5wcm90b3R5cGUuYWRkRnJhbWU9ZnVuY3Rpb24oaW1hZ2VEYXRhKXt0aGlzLmltYWdlPWltYWdlRGF0YTt0aGlzLmNvbG9yVGFiPXRoaXMuZ2xvYmFsUGFsZXR0ZSYmdGhpcy5nbG9iYWxQYWxldHRlLnNsaWNlP3RoaXMuZ2xvYmFsUGFsZXR0ZTpudWxsO3RoaXMuZ2V0SW1hZ2VQaXhlbHMoKTt0aGlzLmFuYWx5emVQaXhlbHMoKTtpZih0aGlzLmdsb2JhbFBhbGV0dGU9PT10cnVlKXRoaXMuZ2xvYmFsUGFsZXR0ZT10aGlzLmNvbG9yVGFiO2lmKHRoaXMuZmlyc3RGcmFtZSl7dGhpcy53cml0ZUxTRCgpO3RoaXMud3JpdGVQYWxldHRlKCk7aWYodGhpcy5yZXBlYXQ+PTApe3RoaXMud3JpdGVOZXRzY2FwZUV4dCgpfX10aGlzLndyaXRlR3JhcGhpY0N0cmxFeHQoKTt0aGlzLndyaXRlSW1hZ2VEZXNjKCk7aWYoIXRoaXMuZmlyc3RGcmFtZSYmIXRoaXMuZ2xvYmFsUGFsZXR0ZSl0aGlzLndyaXRlUGFsZXR0ZSgpO3RoaXMud3JpdGVQaXhlbHMoKTt0aGlzLmZpcnN0RnJhbWU9ZmFsc2V9O0dJRkVuY29kZXIucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3RoaXMub3V0LndyaXRlQnl0ZSg1OSl9O0dJRkVuY29kZXIucHJvdG90eXBlLnNldFF1YWxpdHk9ZnVuY3Rpb24ocXVhbGl0eSl7aWYocXVhbGl0eTwxKXF1YWxpdHk9MTt0aGlzLnNhbXBsZT1xdWFsaXR5fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXREaXRoZXI9ZnVuY3Rpb24oZGl0aGVyKXtpZihkaXRoZXI9PT10cnVlKWRpdGhlcj0iRmxveWRTdGVpbmJlcmciO3RoaXMuZGl0aGVyPWRpdGhlcn07R0lGRW5jb2Rlci5wcm90b3R5cGUuc2V0R2xvYmFsUGFsZXR0ZT1mdW5jdGlvbihwYWxldHRlKXt0aGlzLmdsb2JhbFBhbGV0dGU9cGFsZXR0ZX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZ2V0R2xvYmFsUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdsb2JhbFBhbGV0dGUmJnRoaXMuZ2xvYmFsUGFsZXR0ZS5zbGljZSYmdGhpcy5nbG9iYWxQYWxldHRlLnNsaWNlKDApfHx0aGlzLmdsb2JhbFBhbGV0dGV9O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKCl7dGhpcy5vdXQud3JpdGVVVEZCeXRlcygiR0lGODlhIil9O0dJRkVuY29kZXIucHJvdG90eXBlLmFuYWx5emVQaXhlbHM9ZnVuY3Rpb24oKXtpZighdGhpcy5jb2xvclRhYil7dGhpcy5uZXVRdWFudD1uZXcgTmV1UXVhbnQodGhpcy5waXhlbHMsdGhpcy5zYW1wbGUpO3RoaXMubmV1UXVhbnQuYnVpbGRDb2xvcm1hcCgpO3RoaXMuY29sb3JUYWI9dGhpcy5uZXVRdWFudC5nZXRDb2xvcm1hcCgpfWlmKHRoaXMuZGl0aGVyKXt0aGlzLmRpdGhlclBpeGVscyh0aGlzLmRpdGhlci5yZXBsYWNlKCItc2VycGVudGluZSIsIiIpLHRoaXMuZGl0aGVyLm1hdGNoKC8tc2VycGVudGluZS8pIT09bnVsbCl9ZWxzZXt0aGlzLmluZGV4UGl4ZWxzKCl9dGhpcy5waXhlbHM9bnVsbDt0aGlzLmNvbG9yRGVwdGg9ODt0aGlzLnBhbFNpemU9NztpZih0aGlzLnRyYW5zcGFyZW50IT09bnVsbCl7dGhpcy50cmFuc0luZGV4PXRoaXMuZmluZENsb3Nlc3QodGhpcy50cmFuc3BhcmVudCx0cnVlKX19O0dJRkVuY29kZXIucHJvdG90eXBlLmluZGV4UGl4ZWxzPWZ1bmN0aW9uKGltZ3Epe3ZhciBuUGl4PXRoaXMucGl4ZWxzLmxlbmd0aC8zO3RoaXMuaW5kZXhlZFBpeGVscz1uZXcgVWludDhBcnJheShuUGl4KTt2YXIgaz0wO2Zvcih2YXIgaj0wO2o8blBpeDtqKyspe3ZhciBpbmRleD10aGlzLmZpbmRDbG9zZXN0UkdCKHRoaXMucGl4ZWxzW2srK10mMjU1LHRoaXMucGl4ZWxzW2srK10mMjU1LHRoaXMucGl4ZWxzW2srK10mMjU1KTt0aGlzLnVzZWRFbnRyeVtpbmRleF09dHJ1ZTt0aGlzLmluZGV4ZWRQaXhlbHNbal09aW5kZXh9fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5kaXRoZXJQaXhlbHM9ZnVuY3Rpb24oa2VybmVsLHNlcnBlbnRpbmUpe3ZhciBrZXJuZWxzPXtGYWxzZUZsb3lkU3RlaW5iZXJnOltbMy84LDEsMF0sWzMvOCwwLDFdLFsyLzgsMSwxXV0sRmxveWRTdGVpbmJlcmc6W1s3LzE2LDEsMF0sWzMvMTYsLTEsMV0sWzUvMTYsMCwxXSxbMS8xNiwxLDFdXSxTdHVja2k6W1s4LzQyLDEsMF0sWzQvNDIsMiwwXSxbMi80MiwtMiwxXSxbNC80MiwtMSwxXSxbOC80MiwwLDFdLFs0LzQyLDEsMV0sWzIvNDIsMiwxXSxbMS80MiwtMiwyXSxbMi80MiwtMSwyXSxbNC80MiwwLDJdLFsyLzQyLDEsMl0sWzEvNDIsMiwyXV0sQXRraW5zb246W1sxLzgsMSwwXSxbMS84LDIsMF0sWzEvOCwtMSwxXSxbMS84LDAsMV0sWzEvOCwxLDFdLFsxLzgsMCwyXV19O2lmKCFrZXJuZWx8fCFrZXJuZWxzW2tlcm5lbF0pe3Rocm93IlVua25vd24gZGl0aGVyaW5nIGtlcm5lbDogIitrZXJuZWx9dmFyIGRzPWtlcm5lbHNba2VybmVsXTt2YXIgaW5kZXg9MCxoZWlnaHQ9dGhpcy5oZWlnaHQsd2lkdGg9dGhpcy53aWR0aCxkYXRhPXRoaXMucGl4ZWxzO3ZhciBkaXJlY3Rpb249c2VycGVudGluZT8tMToxO3RoaXMuaW5kZXhlZFBpeGVscz1uZXcgVWludDhBcnJheSh0aGlzLnBpeGVscy5sZW5ndGgvMyk7Zm9yKHZhciB5PTA7eTxoZWlnaHQ7eSsrKXtpZihzZXJwZW50aW5lKWRpcmVjdGlvbj1kaXJlY3Rpb24qLTE7Zm9yKHZhciB4PWRpcmVjdGlvbj09MT8wOndpZHRoLTEseGVuZD1kaXJlY3Rpb249PTE/d2lkdGg6MDt4IT09eGVuZDt4Kz1kaXJlY3Rpb24pe2luZGV4PXkqd2lkdGgreDt2YXIgaWR4PWluZGV4KjM7dmFyIHIxPWRhdGFbaWR4XTt2YXIgZzE9ZGF0YVtpZHgrMV07dmFyIGIxPWRhdGFbaWR4KzJdO2lkeD10aGlzLmZpbmRDbG9zZXN0UkdCKHIxLGcxLGIxKTt0aGlzLnVzZWRFbnRyeVtpZHhdPXRydWU7dGhpcy5pbmRleGVkUGl4ZWxzW2luZGV4XT1pZHg7aWR4Kj0zO3ZhciByMj10aGlzLmNvbG9yVGFiW2lkeF07dmFyIGcyPXRoaXMuY29sb3JUYWJbaWR4KzFdO3ZhciBiMj10aGlzLmNvbG9yVGFiW2lkeCsyXTt2YXIgZXI9cjEtcjI7dmFyIGVnPWcxLWcyO3ZhciBlYj1iMS1iMjtmb3IodmFyIGk9ZGlyZWN0aW9uPT0xPzA6ZHMubGVuZ3RoLTEsZW5kPWRpcmVjdGlvbj09MT9kcy5sZW5ndGg6MDtpIT09ZW5kO2krPWRpcmVjdGlvbil7dmFyIHgxPWRzW2ldWzFdO3ZhciB5MT1kc1tpXVsyXTtpZih4MSt4Pj0wJiZ4MSt4PHdpZHRoJiZ5MSt5Pj0wJiZ5MSt5PGhlaWdodCl7dmFyIGQ9ZHNbaV1bMF07aWR4PWluZGV4K3gxK3kxKndpZHRoO2lkeCo9MztkYXRhW2lkeF09TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsZGF0YVtpZHhdK2VyKmQpKTtkYXRhW2lkeCsxXT1NYXRoLm1heCgwLE1hdGgubWluKDI1NSxkYXRhW2lkeCsxXStlZypkKSk7ZGF0YVtpZHgrMl09TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsZGF0YVtpZHgrMl0rZWIqZCkpfX19fX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZmluZENsb3Nlc3Q9ZnVuY3Rpb24oYyx1c2VkKXtyZXR1cm4gdGhpcy5maW5kQ2xvc2VzdFJHQigoYyYxNjcxMTY4MCk+PjE2LChjJjY1MjgwKT4+OCxjJjI1NSx1c2VkKX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZmluZENsb3Nlc3RSR0I9ZnVuY3Rpb24ocixnLGIsdXNlZCl7aWYodGhpcy5jb2xvclRhYj09PW51bGwpcmV0dXJuLTE7aWYodGhpcy5uZXVRdWFudCYmIXVzZWQpe3JldHVybiB0aGlzLm5ldVF1YW50Lmxvb2t1cFJHQihyLGcsYil9dmFyIGM9YnxnPDw4fHI8PDE2O3ZhciBtaW5wb3M9MDt2YXIgZG1pbj0yNTYqMjU2KjI1Njt2YXIgbGVuPXRoaXMuY29sb3JUYWIubGVuZ3RoO2Zvcih2YXIgaT0wLGluZGV4PTA7aTxsZW47aW5kZXgrKyl7dmFyIGRyPXItKHRoaXMuY29sb3JUYWJbaSsrXSYyNTUpO3ZhciBkZz1nLSh0aGlzLmNvbG9yVGFiW2krK10mMjU1KTt2YXIgZGI9Yi0odGhpcy5jb2xvclRhYltpKytdJjI1NSk7dmFyIGQ9ZHIqZHIrZGcqZGcrZGIqZGI7aWYoKCF1c2VkfHx0aGlzLnVzZWRFbnRyeVtpbmRleF0pJiZkPGRtaW4pe2RtaW49ZDttaW5wb3M9aW5kZXh9fXJldHVybiBtaW5wb3N9O0dJRkVuY29kZXIucHJvdG90eXBlLmdldEltYWdlUGl4ZWxzPWZ1bmN0aW9uKCl7dmFyIHc9dGhpcy53aWR0aDt2YXIgaD10aGlzLmhlaWdodDt0aGlzLnBpeGVscz1uZXcgVWludDhBcnJheSh3KmgqMyk7dmFyIGRhdGE9dGhpcy5pbWFnZTt2YXIgc3JjUG9zPTA7dmFyIGNvdW50PTA7Zm9yKHZhciBpPTA7aTxoO2krKyl7Zm9yKHZhciBqPTA7ajx3O2orKyl7dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107c3JjUG9zKyt9fX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVHcmFwaGljQ3RybEV4dD1mdW5jdGlvbigpe3RoaXMub3V0LndyaXRlQnl0ZSgzMyk7dGhpcy5vdXQud3JpdGVCeXRlKDI0OSk7dGhpcy5vdXQud3JpdGVCeXRlKDQpO3ZhciB0cmFuc3AsZGlzcDtpZih0aGlzLnRyYW5zcGFyZW50PT09bnVsbCl7dHJhbnNwPTA7ZGlzcD0wfWVsc2V7dHJhbnNwPTE7ZGlzcD0yfWlmKHRoaXMuZGlzcG9zZT49MCl7ZGlzcD1kaXNwb3NlJjd9ZGlzcDw8PTI7dGhpcy5vdXQud3JpdGVCeXRlKDB8ZGlzcHwwfHRyYW5zcCk7dGhpcy53cml0ZVNob3J0KHRoaXMuZGVsYXkpO3RoaXMub3V0LndyaXRlQnl0ZSh0aGlzLnRyYW5zSW5kZXgpO3RoaXMub3V0LndyaXRlQnl0ZSgwKX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVJbWFnZURlc2M9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGUoNDQpO3RoaXMud3JpdGVTaG9ydCgwKTt0aGlzLndyaXRlU2hvcnQoMCk7dGhpcy53cml0ZVNob3J0KHRoaXMud2lkdGgpO3RoaXMud3JpdGVTaG9ydCh0aGlzLmhlaWdodCk7aWYodGhpcy5maXJzdEZyYW1lfHx0aGlzLmdsb2JhbFBhbGV0dGUpe3RoaXMub3V0LndyaXRlQnl0ZSgwKX1lbHNle3RoaXMub3V0LndyaXRlQnl0ZSgxMjh8MHwwfDB8dGhpcy5wYWxTaXplKX19O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlTFNEPWZ1bmN0aW9uKCl7dGhpcy53cml0ZVNob3J0KHRoaXMud2lkdGgpO3RoaXMud3JpdGVTaG9ydCh0aGlzLmhlaWdodCk7dGhpcy5vdXQud3JpdGVCeXRlKDEyOHwxMTJ8MHx0aGlzLnBhbFNpemUpO3RoaXMub3V0LndyaXRlQnl0ZSgwKTt0aGlzLm91dC53cml0ZUJ5dGUoMCl9O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlTmV0c2NhcGVFeHQ9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGUoMzMpO3RoaXMub3V0LndyaXRlQnl0ZSgyNTUpO3RoaXMub3V0LndyaXRlQnl0ZSgxMSk7dGhpcy5vdXQud3JpdGVVVEZCeXRlcygiTkVUU0NBUEUyLjAiKTt0aGlzLm91dC53cml0ZUJ5dGUoMyk7dGhpcy5vdXQud3JpdGVCeXRlKDEpO3RoaXMud3JpdGVTaG9ydCh0aGlzLnJlcGVhdCk7dGhpcy5vdXQud3JpdGVCeXRlKDApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS53cml0ZVBhbGV0dGU9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGVzKHRoaXMuY29sb3JUYWIpO3ZhciBuPTMqMjU2LXRoaXMuY29sb3JUYWIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bjtpKyspdGhpcy5vdXQud3JpdGVCeXRlKDApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS53cml0ZVNob3J0PWZ1bmN0aW9uKHBWYWx1ZSl7dGhpcy5vdXQud3JpdGVCeXRlKHBWYWx1ZSYyNTUpO3RoaXMub3V0LndyaXRlQnl0ZShwVmFsdWU+PjgmMjU1KX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVQaXhlbHM9ZnVuY3Rpb24oKXt2YXIgZW5jPW5ldyBMWldFbmNvZGVyKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsdGhpcy5pbmRleGVkUGl4ZWxzLHRoaXMuY29sb3JEZXB0aCk7ZW5jLmVuY29kZSh0aGlzLm91dCl9O0dJRkVuY29kZXIucHJvdG90eXBlLnN0cmVhbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm91dH07bW9kdWxlLmV4cG9ydHM9R0lGRW5jb2Rlcn0seyIuL0xaV0VuY29kZXIuanMiOjIsIi4vVHlwZWROZXVRdWFudC5qcyI6M31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBFT0Y9LTE7dmFyIEJJVFM9MTI7dmFyIEhTSVpFPTUwMDM7dmFyIG1hc2tzPVswLDEsMyw3LDE1LDMxLDYzLDEyNywyNTUsNTExLDEwMjMsMjA0Nyw0MDk1LDgxOTEsMTYzODMsMzI3NjcsNjU1MzVdO2Z1bmN0aW9uIExaV0VuY29kZXIod2lkdGgsaGVpZ2h0LHBpeGVscyxjb2xvckRlcHRoKXt2YXIgaW5pdENvZGVTaXplPU1hdGgubWF4KDIsY29sb3JEZXB0aCk7dmFyIGFjY3VtPW5ldyBVaW50OEFycmF5KDI1Nik7dmFyIGh0YWI9bmV3IEludDMyQXJyYXkoSFNJWkUpO3ZhciBjb2RldGFiPW5ldyBJbnQzMkFycmF5KEhTSVpFKTt2YXIgY3VyX2FjY3VtLGN1cl9iaXRzPTA7dmFyIGFfY291bnQ7dmFyIGZyZWVfZW50PTA7dmFyIG1heGNvZGU7dmFyIGNsZWFyX2ZsZz1mYWxzZTt2YXIgZ19pbml0X2JpdHMsQ2xlYXJDb2RlLEVPRkNvZGU7ZnVuY3Rpb24gY2hhcl9vdXQoYyxvdXRzKXthY2N1bVthX2NvdW50KytdPWM7aWYoYV9jb3VudD49MjU0KWZsdXNoX2NoYXIob3V0cyl9ZnVuY3Rpb24gY2xfYmxvY2sob3V0cyl7Y2xfaGFzaChIU0laRSk7ZnJlZV9lbnQ9Q2xlYXJDb2RlKzI7Y2xlYXJfZmxnPXRydWU7b3V0cHV0KENsZWFyQ29kZSxvdXRzKX1mdW5jdGlvbiBjbF9oYXNoKGhzaXplKXtmb3IodmFyIGk9MDtpPGhzaXplOysraSlodGFiW2ldPS0xfWZ1bmN0aW9uIGNvbXByZXNzKGluaXRfYml0cyxvdXRzKXt2YXIgZmNvZGUsYyxpLGVudCxkaXNwLGhzaXplX3JlZyxoc2hpZnQ7Z19pbml0X2JpdHM9aW5pdF9iaXRzO2NsZWFyX2ZsZz1mYWxzZTtuX2JpdHM9Z19pbml0X2JpdHM7bWF4Y29kZT1NQVhDT0RFKG5fYml0cyk7Q2xlYXJDb2RlPTE8PGluaXRfYml0cy0xO0VPRkNvZGU9Q2xlYXJDb2RlKzE7ZnJlZV9lbnQ9Q2xlYXJDb2RlKzI7YV9jb3VudD0wO2VudD1uZXh0UGl4ZWwoKTtoc2hpZnQ9MDtmb3IoZmNvZGU9SFNJWkU7ZmNvZGU8NjU1MzY7ZmNvZGUqPTIpKytoc2hpZnQ7aHNoaWZ0PTgtaHNoaWZ0O2hzaXplX3JlZz1IU0laRTtjbF9oYXNoKGhzaXplX3JlZyk7b3V0cHV0KENsZWFyQ29kZSxvdXRzKTtvdXRlcl9sb29wOndoaWxlKChjPW5leHRQaXhlbCgpKSE9RU9GKXtmY29kZT0oYzw8QklUUykrZW50O2k9Yzw8aHNoaWZ0XmVudDtpZihodGFiW2ldPT09ZmNvZGUpe2VudD1jb2RldGFiW2ldO2NvbnRpbnVlfWVsc2UgaWYoaHRhYltpXT49MCl7ZGlzcD1oc2l6ZV9yZWctaTtpZihpPT09MClkaXNwPTE7ZG97aWYoKGktPWRpc3ApPDApaSs9aHNpemVfcmVnO2lmKGh0YWJbaV09PT1mY29kZSl7ZW50PWNvZGV0YWJbaV07Y29udGludWUgb3V0ZXJfbG9vcH19d2hpbGUoaHRhYltpXT49MCl9b3V0cHV0KGVudCxvdXRzKTtlbnQ9YztpZihmcmVlX2VudDwxPDxCSVRTKXtjb2RldGFiW2ldPWZyZWVfZW50Kys7aHRhYltpXT1mY29kZX1lbHNle2NsX2Jsb2NrKG91dHMpfX1vdXRwdXQoZW50LG91dHMpO291dHB1dChFT0ZDb2RlLG91dHMpfWZ1bmN0aW9uIGVuY29kZShvdXRzKXtvdXRzLndyaXRlQnl0ZShpbml0Q29kZVNpemUpO3JlbWFpbmluZz13aWR0aCpoZWlnaHQ7Y3VyUGl4ZWw9MDtjb21wcmVzcyhpbml0Q29kZVNpemUrMSxvdXRzKTtvdXRzLndyaXRlQnl0ZSgwKX1mdW5jdGlvbiBmbHVzaF9jaGFyKG91dHMpe2lmKGFfY291bnQ+MCl7b3V0cy53cml0ZUJ5dGUoYV9jb3VudCk7b3V0cy53cml0ZUJ5dGVzKGFjY3VtLDAsYV9jb3VudCk7YV9jb3VudD0wfX1mdW5jdGlvbiBNQVhDT0RFKG5fYml0cyl7cmV0dXJuKDE8PG5fYml0cyktMX1mdW5jdGlvbiBuZXh0UGl4ZWwoKXtpZihyZW1haW5pbmc9PT0wKXJldHVybiBFT0Y7LS1yZW1haW5pbmc7dmFyIHBpeD1waXhlbHNbY3VyUGl4ZWwrK107cmV0dXJuIHBpeCYyNTV9ZnVuY3Rpb24gb3V0cHV0KGNvZGUsb3V0cyl7Y3VyX2FjY3VtJj1tYXNrc1tjdXJfYml0c107aWYoY3VyX2JpdHM+MCljdXJfYWNjdW18PWNvZGU8PGN1cl9iaXRzO2Vsc2UgY3VyX2FjY3VtPWNvZGU7Y3VyX2JpdHMrPW5fYml0czt3aGlsZShjdXJfYml0cz49OCl7Y2hhcl9vdXQoY3VyX2FjY3VtJjI1NSxvdXRzKTtjdXJfYWNjdW0+Pj04O2N1cl9iaXRzLT04fWlmKGZyZWVfZW50Pm1heGNvZGV8fGNsZWFyX2ZsZyl7aWYoY2xlYXJfZmxnKXttYXhjb2RlPU1BWENPREUobl9iaXRzPWdfaW5pdF9iaXRzKTtjbGVhcl9mbGc9ZmFsc2V9ZWxzZXsrK25fYml0cztpZihuX2JpdHM9PUJJVFMpbWF4Y29kZT0xPDxCSVRTO2Vsc2UgbWF4Y29kZT1NQVhDT0RFKG5fYml0cyl9fWlmKGNvZGU9PUVPRkNvZGUpe3doaWxlKGN1cl9iaXRzPjApe2NoYXJfb3V0KGN1cl9hY2N1bSYyNTUsb3V0cyk7Y3VyX2FjY3VtPj49ODtjdXJfYml0cy09OH1mbHVzaF9jaGFyKG91dHMpfX10aGlzLmVuY29kZT1lbmNvZGV9bW9kdWxlLmV4cG9ydHM9TFpXRW5jb2Rlcn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBuY3ljbGVzPTEwMDt2YXIgbmV0c2l6ZT0yNTY7dmFyIG1heG5ldHBvcz1uZXRzaXplLTE7dmFyIG5ldGJpYXNzaGlmdD00O3ZhciBpbnRiaWFzc2hpZnQ9MTY7dmFyIGludGJpYXM9MTw8aW50Ymlhc3NoaWZ0O3ZhciBnYW1tYXNoaWZ0PTEwO3ZhciBnYW1tYT0xPDxnYW1tYXNoaWZ0O3ZhciBiZXRhc2hpZnQ9MTA7dmFyIGJldGE9aW50Ymlhcz4+YmV0YXNoaWZ0O3ZhciBiZXRhZ2FtbWE9aW50Ymlhczw8Z2FtbWFzaGlmdC1iZXRhc2hpZnQ7dmFyIGluaXRyYWQ9bmV0c2l6ZT4+Mzt2YXIgcmFkaXVzYmlhc3NoaWZ0PTY7dmFyIHJhZGl1c2JpYXM9MTw8cmFkaXVzYmlhc3NoaWZ0O3ZhciBpbml0cmFkaXVzPWluaXRyYWQqcmFkaXVzYmlhczt2YXIgcmFkaXVzZGVjPTMwO3ZhciBhbHBoYWJpYXNzaGlmdD0xMDt2YXIgaW5pdGFscGhhPTE8PGFscGhhYmlhc3NoaWZ0O3ZhciBhbHBoYWRlYzt2YXIgcmFkYmlhc3NoaWZ0PTg7dmFyIHJhZGJpYXM9MTw8cmFkYmlhc3NoaWZ0O3ZhciBhbHBoYXJhZGJzaGlmdD1hbHBoYWJpYXNzaGlmdCtyYWRiaWFzc2hpZnQ7dmFyIGFscGhhcmFkYmlhcz0xPDxhbHBoYXJhZGJzaGlmdDt2YXIgcHJpbWUxPTQ5OTt2YXIgcHJpbWUyPTQ5MTt2YXIgcHJpbWUzPTQ4Nzt2YXIgcHJpbWU0PTUwMzt2YXIgbWlucGljdHVyZWJ5dGVzPTMqcHJpbWU0O2Z1bmN0aW9uIE5ldVF1YW50KHBpeGVscyxzYW1wbGVmYWMpe3ZhciBuZXR3b3JrO3ZhciBuZXRpbmRleDt2YXIgYmlhczt2YXIgZnJlcTt2YXIgcmFkcG93ZXI7ZnVuY3Rpb24gaW5pdCgpe25ldHdvcms9W107bmV0aW5kZXg9bmV3IEludDMyQXJyYXkoMjU2KTtiaWFzPW5ldyBJbnQzMkFycmF5KG5ldHNpemUpO2ZyZXE9bmV3IEludDMyQXJyYXkobmV0c2l6ZSk7cmFkcG93ZXI9bmV3IEludDMyQXJyYXkobmV0c2l6ZT4+Myk7dmFyIGksdjtmb3IoaT0wO2k8bmV0c2l6ZTtpKyspe3Y9KGk8PG5ldGJpYXNzaGlmdCs4KS9uZXRzaXplO25ldHdvcmtbaV09bmV3IEZsb2F0NjRBcnJheShbdix2LHYsMF0pO2ZyZXFbaV09aW50Ymlhcy9uZXRzaXplO2JpYXNbaV09MH19ZnVuY3Rpb24gdW5iaWFzbmV0KCl7Zm9yKHZhciBpPTA7aTxuZXRzaXplO2krKyl7bmV0d29ya1tpXVswXT4+PW5ldGJpYXNzaGlmdDtuZXR3b3JrW2ldWzFdPj49bmV0Ymlhc3NoaWZ0O25ldHdvcmtbaV1bMl0+Pj1uZXRiaWFzc2hpZnQ7bmV0d29ya1tpXVszXT1pfX1mdW5jdGlvbiBhbHRlcnNpbmdsZShhbHBoYSxpLGIsZyxyKXtuZXR3b3JrW2ldWzBdLT1hbHBoYSoobmV0d29ya1tpXVswXS1iKS9pbml0YWxwaGE7bmV0d29ya1tpXVsxXS09YWxwaGEqKG5ldHdvcmtbaV1bMV0tZykvaW5pdGFscGhhO25ldHdvcmtbaV1bMl0tPWFscGhhKihuZXR3b3JrW2ldWzJdLXIpL2luaXRhbHBoYX1mdW5jdGlvbiBhbHRlcm5laWdoKHJhZGl1cyxpLGIsZyxyKXt2YXIgbG89TWF0aC5hYnMoaS1yYWRpdXMpO3ZhciBoaT1NYXRoLm1pbihpK3JhZGl1cyxuZXRzaXplKTt2YXIgaj1pKzE7dmFyIGs9aS0xO3ZhciBtPTE7dmFyIHAsYTt3aGlsZShqPGhpfHxrPmxvKXthPXJhZHBvd2VyW20rK107aWYoajxoaSl7cD1uZXR3b3JrW2orK107cFswXS09YSoocFswXS1iKS9hbHBoYXJhZGJpYXM7cFsxXS09YSoocFsxXS1nKS9hbHBoYXJhZGJpYXM7cFsyXS09YSoocFsyXS1yKS9hbHBoYXJhZGJpYXN9aWYoaz5sbyl7cD1uZXR3b3JrW2stLV07cFswXS09YSoocFswXS1iKS9hbHBoYXJhZGJpYXM7cFsxXS09YSoocFsxXS1nKS9hbHBoYXJhZGJpYXM7cFsyXS09YSoocFsyXS1yKS9hbHBoYXJhZGJpYXN9fX1mdW5jdGlvbiBjb250ZXN0KGIsZyxyKXt2YXIgYmVzdGQ9figxPDwzMSk7dmFyIGJlc3RiaWFzZD1iZXN0ZDt2YXIgYmVzdHBvcz0tMTt2YXIgYmVzdGJpYXNwb3M9YmVzdHBvczt2YXIgaSxuLGRpc3QsYmlhc2Rpc3QsYmV0YWZyZXE7Zm9yKGk9MDtpPG5ldHNpemU7aSsrKXtuPW5ldHdvcmtbaV07ZGlzdD1NYXRoLmFicyhuWzBdLWIpK01hdGguYWJzKG5bMV0tZykrTWF0aC5hYnMoblsyXS1yKTtpZihkaXN0PGJlc3RkKXtiZXN0ZD1kaXN0O2Jlc3Rwb3M9aX1iaWFzZGlzdD1kaXN0LShiaWFzW2ldPj5pbnRiaWFzc2hpZnQtbmV0Ymlhc3NoaWZ0KTtpZihiaWFzZGlzdDxiZXN0Ymlhc2Qpe2Jlc3RiaWFzZD1iaWFzZGlzdDtiZXN0Ymlhc3Bvcz1pfWJldGFmcmVxPWZyZXFbaV0+PmJldGFzaGlmdDtmcmVxW2ldLT1iZXRhZnJlcTtiaWFzW2ldKz1iZXRhZnJlcTw8Z2FtbWFzaGlmdH1mcmVxW2Jlc3Rwb3NdKz1iZXRhO2JpYXNbYmVzdHBvc10tPWJldGFnYW1tYTtyZXR1cm4gYmVzdGJpYXNwb3N9ZnVuY3Rpb24gaW54YnVpbGQoKXt2YXIgaSxqLHAscSxzbWFsbHBvcyxzbWFsbHZhbCxwcmV2aW91c2NvbD0wLHN0YXJ0cG9zPTA7Zm9yKGk9MDtpPG5ldHNpemU7aSsrKXtwPW5ldHdvcmtbaV07c21hbGxwb3M9aTtzbWFsbHZhbD1wWzFdO2ZvcihqPWkrMTtqPG5ldHNpemU7aisrKXtxPW5ldHdvcmtbal07aWYocVsxXTxzbWFsbHZhbCl7c21hbGxwb3M9ajtzbWFsbHZhbD1xWzFdfX1xPW5ldHdvcmtbc21hbGxwb3NdO2lmKGkhPXNtYWxscG9zKXtqPXFbMF07cVswXT1wWzBdO3BbMF09ajtqPXFbMV07cVsxXT1wWzFdO3BbMV09ajtqPXFbMl07cVsyXT1wWzJdO3BbMl09ajtqPXFbM107cVszXT1wWzNdO3BbM109an1pZihzbWFsbHZhbCE9cHJldmlvdXNjb2wpe25ldGluZGV4W3ByZXZpb3VzY29sXT1zdGFydHBvcytpPj4xO2ZvcihqPXByZXZpb3VzY29sKzE7ajxzbWFsbHZhbDtqKyspbmV0aW5kZXhbal09aTtwcmV2aW91c2NvbD1zbWFsbHZhbDtzdGFydHBvcz1pfX1uZXRpbmRleFtwcmV2aW91c2NvbF09c3RhcnRwb3MrbWF4bmV0cG9zPj4xO2ZvcihqPXByZXZpb3VzY29sKzE7ajwyNTY7aisrKW5ldGluZGV4W2pdPW1heG5ldHBvc31mdW5jdGlvbiBpbnhzZWFyY2goYixnLHIpe3ZhciBhLHAsZGlzdDt2YXIgYmVzdGQ9MWUzO3ZhciBiZXN0PS0xO3ZhciBpPW5ldGluZGV4W2ddO3ZhciBqPWktMTt3aGlsZShpPG5ldHNpemV8fGo+PTApe2lmKGk8bmV0c2l6ZSl7cD1uZXR3b3JrW2ldO2Rpc3Q9cFsxXS1nO2lmKGRpc3Q+PWJlc3RkKWk9bmV0c2l6ZTtlbHNle2krKztpZihkaXN0PDApZGlzdD0tZGlzdDthPXBbMF0tYjtpZihhPDApYT0tYTtkaXN0Kz1hO2lmKGRpc3Q8YmVzdGQpe2E9cFsyXS1yO2lmKGE8MClhPS1hO2Rpc3QrPWE7aWYoZGlzdDxiZXN0ZCl7YmVzdGQ9ZGlzdDtiZXN0PXBbM119fX19aWYoaj49MCl7cD1uZXR3b3JrW2pdO2Rpc3Q9Zy1wWzFdO2lmKGRpc3Q+PWJlc3RkKWo9LTE7ZWxzZXtqLS07aWYoZGlzdDwwKWRpc3Q9LWRpc3Q7YT1wWzBdLWI7aWYoYTwwKWE9LWE7ZGlzdCs9YTtpZihkaXN0PGJlc3RkKXthPXBbMl0tcjtpZihhPDApYT0tYTtkaXN0Kz1hO2lmKGRpc3Q8YmVzdGQpe2Jlc3RkPWRpc3Q7YmVzdD1wWzNdfX19fX1yZXR1cm4gYmVzdH1mdW5jdGlvbiBsZWFybigpe3ZhciBpO3ZhciBsZW5ndGhjb3VudD1waXhlbHMubGVuZ3RoO3ZhciBhbHBoYWRlYz0zMCsoc2FtcGxlZmFjLTEpLzM7dmFyIHNhbXBsZXBpeGVscz1sZW5ndGhjb3VudC8oMypzYW1wbGVmYWMpO3ZhciBkZWx0YT1+fihzYW1wbGVwaXhlbHMvbmN5Y2xlcyk7dmFyIGFscGhhPWluaXRhbHBoYTt2YXIgcmFkaXVzPWluaXRyYWRpdXM7dmFyIHJhZD1yYWRpdXM+PnJhZGl1c2JpYXNzaGlmdDtpZihyYWQ8PTEpcmFkPTA7Zm9yKGk9MDtpPHJhZDtpKyspcmFkcG93ZXJbaV09YWxwaGEqKChyYWQqcmFkLWkqaSkqcmFkYmlhcy8ocmFkKnJhZCkpO3ZhciBzdGVwO2lmKGxlbmd0aGNvdW50PG1pbnBpY3R1cmVieXRlcyl7c2FtcGxlZmFjPTE7c3RlcD0zfWVsc2UgaWYobGVuZ3RoY291bnQlcHJpbWUxIT09MCl7c3RlcD0zKnByaW1lMX1lbHNlIGlmKGxlbmd0aGNvdW50JXByaW1lMiE9PTApe3N0ZXA9MypwcmltZTJ9ZWxzZSBpZihsZW5ndGhjb3VudCVwcmltZTMhPT0wKXtzdGVwPTMqcHJpbWUzfWVsc2V7c3RlcD0zKnByaW1lNH12YXIgYixnLHIsajt2YXIgcGl4PTA7aT0wO3doaWxlKGk8c2FtcGxlcGl4ZWxzKXtiPShwaXhlbHNbcGl4XSYyNTUpPDxuZXRiaWFzc2hpZnQ7Zz0ocGl4ZWxzW3BpeCsxXSYyNTUpPDxuZXRiaWFzc2hpZnQ7cj0ocGl4ZWxzW3BpeCsyXSYyNTUpPDxuZXRiaWFzc2hpZnQ7aj1jb250ZXN0KGIsZyxyKTthbHRlcnNpbmdsZShhbHBoYSxqLGIsZyxyKTtpZihyYWQhPT0wKWFsdGVybmVpZ2gocmFkLGosYixnLHIpO3BpeCs9c3RlcDtpZihwaXg+PWxlbmd0aGNvdW50KXBpeC09bGVuZ3RoY291bnQ7aSsrO2lmKGRlbHRhPT09MClkZWx0YT0xO2lmKGklZGVsdGE9PT0wKXthbHBoYS09YWxwaGEvYWxwaGFkZWM7cmFkaXVzLT1yYWRpdXMvcmFkaXVzZGVjO3JhZD1yYWRpdXM+PnJhZGl1c2JpYXNzaGlmdDtpZihyYWQ8PTEpcmFkPTA7Zm9yKGo9MDtqPHJhZDtqKyspcmFkcG93ZXJbal09YWxwaGEqKChyYWQqcmFkLWoqaikqcmFkYmlhcy8ocmFkKnJhZCkpfX19ZnVuY3Rpb24gYnVpbGRDb2xvcm1hcCgpe2luaXQoKTtsZWFybigpO3VuYmlhc25ldCgpO2lueGJ1aWxkKCl9dGhpcy5idWlsZENvbG9ybWFwPWJ1aWxkQ29sb3JtYXA7ZnVuY3Rpb24gZ2V0Q29sb3JtYXAoKXt2YXIgbWFwPVtdO3ZhciBpbmRleD1bXTtmb3IodmFyIGk9MDtpPG5ldHNpemU7aSsrKWluZGV4W25ldHdvcmtbaV1bM11dPWk7dmFyIGs9MDtmb3IodmFyIGw9MDtsPG5ldHNpemU7bCsrKXt2YXIgaj1pbmRleFtsXTttYXBbaysrXT1uZXR3b3JrW2pdWzBdO21hcFtrKytdPW5ldHdvcmtbal1bMV07bWFwW2srK109bmV0d29ya1tqXVsyXX1yZXR1cm4gbWFwfXRoaXMuZ2V0Q29sb3JtYXA9Z2V0Q29sb3JtYXA7dGhpcy5sb29rdXBSR0I9aW54c2VhcmNofW1vZHVsZS5leHBvcnRzPU5ldVF1YW50fSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7dmFyIEdJRkVuY29kZXIscmVuZGVyRnJhbWU7R0lGRW5jb2Rlcj1yZXF1aXJlKCIuL0dJRkVuY29kZXIuanMiKTtyZW5kZXJGcmFtZT1mdW5jdGlvbihmcmFtZSl7dmFyIGVuY29kZXIscGFnZSxzdHJlYW0sdHJhbnNmZXI7ZW5jb2Rlcj1uZXcgR0lGRW5jb2RlcihmcmFtZS53aWR0aCxmcmFtZS5oZWlnaHQpO2lmKGZyYW1lLmluZGV4PT09MCl7ZW5jb2Rlci53cml0ZUhlYWRlcigpfWVsc2V7ZW5jb2Rlci5maXJzdEZyYW1lPWZhbHNlfWVuY29kZXIuc2V0VHJhbnNwYXJlbnQoZnJhbWUudHJhbnNwYXJlbnQpO2VuY29kZXIuc2V0UmVwZWF0KGZyYW1lLnJlcGVhdCk7ZW5jb2Rlci5zZXREZWxheShmcmFtZS5kZWxheSk7ZW5jb2Rlci5zZXRRdWFsaXR5KGZyYW1lLnF1YWxpdHkpO2VuY29kZXIuc2V0RGl0aGVyKGZyYW1lLmRpdGhlcik7ZW5jb2Rlci5zZXRHbG9iYWxQYWxldHRlKGZyYW1lLmdsb2JhbFBhbGV0dGUpO2VuY29kZXIuYWRkRnJhbWUoZnJhbWUuZGF0YSk7aWYoZnJhbWUubGFzdCl7ZW5jb2Rlci5maW5pc2goKX1pZihmcmFtZS5nbG9iYWxQYWxldHRlPT09dHJ1ZSl7ZnJhbWUuZ2xvYmFsUGFsZXR0ZT1lbmNvZGVyLmdldEdsb2JhbFBhbGV0dGUoKX1zdHJlYW09ZW5jb2Rlci5zdHJlYW0oKTtmcmFtZS5kYXRhPXN0cmVhbS5wYWdlcztmcmFtZS5jdXJzb3I9c3RyZWFtLmN1cnNvcjtmcmFtZS5wYWdlU2l6ZT1zdHJlYW0uY29uc3RydWN0b3IucGFnZVNpemU7aWYoZnJhbWUuY2FuVHJhbnNmZXIpe3RyYW5zZmVyPWZ1bmN0aW9uKCl7dmFyIGksbGVuLHJlZixyZXN1bHRzO3JlZj1mcmFtZS5kYXRhO3Jlc3VsdHM9W107Zm9yKGk9MCxsZW49cmVmLmxlbmd0aDtpPGxlbjtpKyspe3BhZ2U9cmVmW2ldO3Jlc3VsdHMucHVzaChwYWdlLmJ1ZmZlcil9cmV0dXJuIHJlc3VsdHN9KCk7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoZnJhbWUsdHJhbnNmZXIpfWVsc2V7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoZnJhbWUpfX07c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZXZlbnQpe3JldHVybiByZW5kZXJGcmFtZShldmVudC5kYXRhKX19LHsiLi9HSUZFbmNvZGVyLmpzIjoxfV19LHt9LFs0XSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWdpZi53b3JrZXIuanMubWFwCg==\"","<template lang=\"pug\">\n.content\n  h1.title In-browser GIF captioning with 3D CSS animations\n\n  p.\n    In this page we'll create a GIF with a caption using 3D CSS animations\n    generated by your browser! And we'll see a few particularities of\n    browser SVG rendering along the way.\n  \n  img(src='finalResult.gif')\n\n  h3 TLDR; The plan\n  \n  p.\n    We will first load a GIF from the internet, and separately create a\n    CSS-animated caption in SVG format. Every few milliseconds, we'll extract\n    a frame from the GIF (we'll just use a library for that),\n    and a snapshot from the animated SVG caption (that's the hard\n    part!). Then we'll combine GIF and caption on a canvas, and send the final frames\n    to #[a(href='https://jnordberg.github.io/gif.js/') GIF.js] for\n    GIF generation.\n  \n  img(src='the-plan.png' style='max-width: 300px;')\n  \n  h3 1. The GIF\n  p Enter a URL below or just leave the default: \n  input(v-model='gifURL')\n  img#gif-img(\n    :src='gifURL'\n    @load=\"onGifLoad\"\n  )\n\n  p\n    :markdown-it\n      I'll try to be transparent with what's running behind the scenes.\n      This page (full code\n      [here](https://github.com/Zulko/gif-captioning-with-css/blob/main/src/Content.vue))\n      is written using the VueJS framework, which provides easy ways to\n      manage events, variables and CSS classes, but could totally be replaced by\n      React or basic Javascript for this demo. Here is the code for the text input field\n      and image above:\n\n  code-snippet(name='user-gif-img-simple')\n\n  h3 2. Extracting frames from the GIF\n\n  p\n    :markdown-it\n      If you want to project the content of an `<img>` onto a HTML canvas,\n      you'll use the `drawImage` method:\n    \n  code-snippet(name='project-img-onto-canvas')\n\n  p\n    :markdown-it\n      Even better, if you want to project the current frame of a `<video>`, you'll\n      simply write `drawImage(myVideo)`. Now let's try the same technique to extract\n      frames from the GIF above:\n\n  code-snippet(name='gif-draw-canvas-html')\n  code-snippet(name='gif-draw-canvas-js')\n\n  p\n    :markdown-it\n      It just doesn't work, the `<canvas>` keeps showing the GIF's first frame:\n\n  center\n    canvas#gif-draw-canvas(:width='gifWidth', :height='gifHeight')\n\n  p\n    :markdown-it\n      That's because when applying `drawImage`, your browser will consider the GIF as\n      an image file, look at the data, extract the first frame (it doesn't know\n      which frame is currently playing on the page ),\n      and draw it. The only workaround is\n      to use a library like [gif-frames](https://www.npmjs.com/package/gif-frames)\n      that will decode the GIF frames directly from the file, and draw them on\n      separate canvas.  \n\n  code-snippet(name='gif-loader-html')\n  code-snippet(name='gif-loader-js')\n\n  p.\n    Now we have extracted each frame's canvas with the time at which they appear,\n    and in the process we gleaned the GIF's width, height and duration.\n\n  h3 3. The caption\n  \n  p Enter a caption below (or just leave the default): \n  input(v-model='caption' mode='text')\n\n  p\n    :markdown-it\n      Let's embed this caption in a SVG tag with the same dimensions as the GIF.\n      Note how I am placing the text using its parent group, rather than writing\n      `<text x=100 y=100>`. This is so the animations can later be applied\n      to the text only and not its coordinates.\n\n  code-snippet(name='caption-svg-base')\n  code-snippet(name='caption-css')\n  \n  svg.with-border(\n    :viewBox=\"`0 0 ${gifWidth} ${gifHeight}`\",\n    :width='gifWidth', :height='gifHeight',\n    :style='{width: gifWidth, height: gifHeight}'\n  )\n    g(:style=\"`transform: translate(${captionX}px, ${captionY}px)`\")\n      text.caption {{caption}}\n\n  h3 4. Animating the caption\n  p.\n    First we'll create our clock, a time variable that loops through the duration\n    of the GIF:\n\n\n  code-snippet(name='clock-js')\n  code-snippet(name='clock-html')\n    \n  center\n    p Current time: {{ timeSeconds.toFixed(2) }} seconds\n  \n  p Now we can make the caption blink on and off with a simple Vue condition:\n\n  code-snippet(name='caption-blink-html')\n  \n  svg.with-border(\n    :viewBox=\"`0 0 ${gifWidth} ${gifHeight}`\",\n    :width='gifWidth', :height='gifHeight',\n    :style='{width: gifWidth, height: gifHeight}'\n  )\n    g(:style=\"`transform: translate(${captionX}px, ${captionY}px)`\")\n      text.caption(v-if='timeSeconds > 0.5 && timeSeconds < 2') {{caption}}\n\n  p.\n    Then we'll use #[a(href=\"https://animate.style/\" target='_blank') Animate.css], a very practical\n    CSS library with dozens of predefined animations. All you have to do\n    is load the library and give a certain class to an element:\n\n  code-snippet(name='animate-example-css')\n  code-snippet(name='animate-example')\n  center\n    div(style='display: block; text-align: center; width: 200px; height: 50px;')\n      h4.animate__animated.animate__heartBeat.animate__infinite BOOM\n  \n  p\n    :markdown-it\n      This will work particularly well with the VueJS framework, which lets you\n      specify `<transition>` classes for when your element appears and disappears:\n  \n  code-snippet(name='animated-svg')\n\n  p.\n    The result will look slighlty different on Chrome/Firefox/Safari, as each browser\n    handles 3D CSS transforms differently:  \n\n  svg.with-border#animated-caption(\n    xmlns=\"http://www.w3.org/2000/svg\"\n    :viewBox=\"`0 0 ${gifWidth} ${gifHeight}`\",\n    :width='gifWidth', :height='gifHeight',\n    :style='{width: gifWidth, height: gifHeight}'\n  )\n    g(:style=\"`transform: translate(${captionX}px, ${captionY}px)`\")\n      transition(\n        enter-active-class='animate__animated animate__jackInTheBox animate__flipInX'\n        leave-active-class='animate__animated animate__backOutUp'\n      )\n        text.caption(v-if='timeSeconds > 0.5 && timeSeconds < 2') {{caption}}\n\n  p.\n    And just like that, we have our animation.\n\n\n  h3 5. The hard part: SVG snapshots\n\n  p\n    :markdown-it\n      Your browser has two very distinct ways of displaying SVG images:\n      \n      - If the SVG is defined using a `<svg>` tag, the browser considers the SVG\n        and its components (`<text>`, `<g>`) as first-class components of the\n        page: it will apply CSS properties (including CSS animations, and custom\n        fonts loaded in the page), it can let you select the elements with the\n        mouse, etc. The downside is that you can't draw these elements on a canvas\n        with `drawImage()`\n      -  If the SVG is loaded as `<image src='some.svg'/>`, the browser will\n        render it using a separate SVG engine (which can understand CSS styles,\n        but won't know CSS classes and animations defined in the page), and\n        display the image's pixels in the browser. These can then be projected\n        on a canvas with `drawImage()`.\n      \n      See where this is going? We'll start from the animated `<svg>` element\n      above, and take SVG \"snapshots\" that we'll feed to a\n      `<img src=...>` element, so that they are canvas-compatible. \n\n\n      The first step will be to go from the original SVG definition, which looks like this:\n      \n  code-snippet(name='text-with-classes')\n  \n  p\n    :markdown-it\n      And transform it so that it explicitly features the transformations the browser\n      is applying to the `<text>` at a given time point, and looks like this:\n\n  code-snippet(name='text-with-styles')\n  \n  p\n    :markdown-it\n      [This great blog post](https://toucantoco.com/en/tech-blog/tech/capture-your-html)\n      by Sophie Despeisse provides a function to capture all the browser-computed styles of a SVG.\n      It is done in two parts. First you ask for computed styles via the browser's `getComputedStyle`\n      method:\n\n  code-snippet(name='computed-style')\n\n  p\n    :markdown-it\n      Then you apply the method above recursively to all the components of your SVG\n      (`<g>`, `<text>`, etc):\n  \n  code-snippet(name='inline-style')\n  \n\n  p Now let's record the computed style of the SVG above at every tick of the clock:\n\n  code-snippet(name='compute-style-loop')\n\n  p Here is a rendition of #[code captionSource]:\n\n  pre\n    code.caption-source {{formattedCaptionSource}}\n\n  p\n    :markdown-it\n      For our last step, we'll feed that whole text to an `<img/>` tag as a\n      *data URL*, which is of the form `src='data:image/svg+xml,$DATA'`. Note\n      how the SVG data is sanitized (`'` is replaced by its URL-equivalent `%22`)\n      so it won't corrupt the file.\n  \n\n  code-snippet(name='captionImgSrc')\n  code-snippet(name='captionImg-html')\n  \n  p\n    :markdown-it\n      And here is the final `<img/>` whose `src` is updated at each tick of the clock:\n\n  img#caption-img(:src='captionImgSrc', :width='gifWidth')\n\n  p\n    :markdown-it\n      If you don't have the [*Anton*](https://fonts.google.com/specimen/Anton) or\n      *Impact* font installed on your computer, you'll\n      probably have a very different, *default* font appear in the animation above.\n      Again, this is because these pictures are generated by your browser using\n      a separate SVG renderer which doesn't have access to the fonts loaded in this\n      page. On the good news side, that renderer did take into account the 3D transforms,\n      although 3D transforms are not officially part of the SVG standard.\n      \n      The (very useful) [CanVG](https://www.npmjs.com/package/canvg) library will\n      render SVGs on a canvas using fonts loaded in the page. However, CanVG is limited\n      to the standard SVG definition, and so won't take into account 3D transforms.\n\n  h3 GIF and caption come together\n\n  p\n    :markdown-it\n      At each tick of the clock, we will now project, on a same `<canvas>`, the\n      GIF frame corresponding to the current time, and the current caption from the\n      `<img>` above:\n\n  code-snippet(name='merge-gif-and-caption')\n  center\n    canvas#final-canvas(:width=\"gifWidth\" :height=\"gifHeight\")\n  \n\n\n\n  h3 Final step: rendering the GIF\n\n  p\n    :markdown-it\n      There are a couple Javascript frameworks for generating GIFs.\n      [GIF.js](https://jnordberg.github.io/gif.js/) is my favorite.\n      You first initialize a renderer, then send frames (images or canvas) to it,\n      and finally trigger the GIF rendering.\n      \n      For this demo we'll have the renderer's creation triggered with a button.\n\n  code-snippet(name='onRecordButtonClicked-html')\n\n  p\n    :markdown-it\n      When we create the renderer we set it up so that, upon completion, it writes the\n      final GIF's data into a `renderedGif` variable that is fed to an `<img>` element:\n  \n  code-snippet(name='onRecordButtonClicked')\n  code-snippet(name='rendered-gif-html')\n\n  p Then we modify the main loop so that every frame gets sent to the GIF renderer:\n\n  code-snippet(name='recording-main-loop')\n\n\n  p.\n    And when the GIF has played once in its entirety, the frame recording stops, and the\n    renderer can start actually generating the GIF. We do so by modifying the clock's loop:\n\n  code-snippet(name='render-gif')\n  \n  \n\n  p.\n    That's it, we made it! Press the button!\n    #[img.emoji(src='https://emojis.slackmojis.com/emojis/images/1584725500/8268/blob-hype.gif')]\n  center\n    button(\n      @click='onRecordButtonClicked'\n      :disabled='isRecording || isRendering'\n    ) Render the gif\n  p(v-if='isRecording') Recording the frames...\n  p(v-if='isRendering') Rendering the GIF (may hang on mobile phones)...\n  p(v-if='renderedGif && !(isRecording || isRendering)') Here's your rendered GIF!\n\n  img#rendered-gif(v-if='renderedGif' :src='renderedGif')\n  \n\n  h3 Conclusion\n\n  p\n    :markdown-it\n      It is fascinating that browsers and JS frameworks have evolved to the point where\n      styling a GIF with CSS is possible. Some time ago I started developing a browser-based\n      GIF captioning app around this trick, but as the project went forward I realized\n      the lack of font support and differences\n      in 3D CSS rendering between browsers were going to be a pain.\n      So I removed the CSS animation feature altogether, and created this demo page instead.\n      \n      On the bright side, this got me started on a new GIF editor that runs\n      entirely in your browser, enables all kinds of GIF mixing and cropping and captioning\n      and animating, and lets you share your projects for others to remix. It's called\n      [Gix and you should totally check it out](https://zulko.github.io/gix).\n\n\n\n\n</template>\n<script>\nimport formatXML from 'xml-formatter';\nimport gifFrames from 'gif-frames';\nimport CodeSnippet from './CodeSnippet.vue';\nimport inlineSVGStyle from './inlineSVGStyle.js';\nimport GIF from 'gif.js';\nimport gifWorker from 'url-loader!./gif.worker.txt'; // eslint-disable-line\n\nexport default {\n  data() {\n    return {\n      gifURL: 'https://i.imgur.com/BF230Z2.gif',\n      caption: 'CHEERS!',\n      captionX: 95,\n      captionY: 100,\n      gifWidth: 200,\n      gifHeight: 200,\n      gifDurationSeconds: 2,\n      frameSeconds: 0.03,\n      timeSeconds: 0,\n      showCaption: true,\n      elements: null,\n      captionSource: '',\n      isRecording: false,\n      isRendering: false,\n      gifRenderer: null,\n      renderedGif: null,\n    };\n  },\n  components: {\n    'code-snippet': CodeSnippet,\n  },\n  methods: {\n    setCaptionSource() {\n      const node = inlineSVGStyle.cloneWithInlineStyle(\n        this.elements.animatedCaption\n      );\n      this.captionSource = node.outerHTML;\n    },\n    onGifLoad() {\n      const self = this;\n      gifFrames(\n        {\n          url: self.gifURL,\n          frames: 'all',\n          outputType: 'canvas',\n          cumulative: true,\n        },\n        (_error, frameData) => {\n          let cumulativeTime = 0;\n          self.frameData = frameData.map(frame => {\n            cumulativeTime += frame.frameInfo.delay / 100;\n            return { untilTime: cumulativeTime, canvas: frame.getImage() };\n          });\n          self.gifWidth = self.frameData[0].canvas.width;\n          self.gifHeight = self.frameData[0].canvas.height;\n          self.gifDurationSeconds = cumulativeTime;\n        }\n      );\n    },\n    onRecordButtonClicked() {\n      const self = this;\n      this.gifRenderer = new GIF({\n        workers: 4,\n        workerScript: gifWorker,\n        quality: 1,\n        width: this.gifWidth,\n        height: this.gifHeight,\n        fps: 1.0 / this.frameSeconds,\n      });\n      this.gifRenderer.on('finished', blob => {\n        self.isRendering = false;\n        const reader = new window.FileReader();\n        reader.readAsDataURL(blob);\n        reader.onloadend = () => {\n          self.renderedGif = reader.result;\n        };\n      });\n      this.isRecording = true;\n      this.timeSeconds = -0.5;\n    },\n  },\n  computed: {\n    formattedCaptionSource() {\n      return formatXML(this.captionSource || '<xml></xml>');\n    },\n    captionImgSrc() {\n      const dataUrl = encodeURIComponent(\n        `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n        ${this.captionSource}`\n      )\n        .replace(/'/g, '%27')\n        .replace(/\"/g, '%22');\n      return `data:image/svg+xml,${dataUrl}`;\n    },\n  },\n  mounted() {\n    const self = this;\n    setInterval(() => {\n      let newTime = self.timeSeconds + self.frameSeconds;\n      if (newTime > self.gifDurationSeconds) {\n        newTime -= self.gifDurationSeconds;\n        if (self.isRecording) {\n          self.isRecording = false;\n          self.isRendering = true;\n          self.gifRenderer.render();\n        }\n      }\n      self.timeSeconds = newTime;\n    }, 1000 * self.frameSeconds);\n    this.elements = {\n      gifImg: document.getElementById('gif-img'),\n      animatedCaption: document.getElementById('animated-caption'),\n      captionImg: document.getElementById('caption-img'),\n      finalCanvas: document.getElementById('final-canvas'),\n    };\n    const gifDrawCanvas = document.getElementById('gif-draw-canvas');\n    const gifDrawCanvasContext = gifDrawCanvas.getContext('2d');\n    setInterval(() => {\n      gifDrawCanvasContext.drawImage(this.elements.gifImg, 0, 0);\n    }, 2000);\n  },\n  watch: {\n    timeSeconds(t) {\n      if (!this.frameData) {\n        return;\n      }\n      const node = inlineSVGStyle.cloneWithInlineStyle(\n        this.elements.animatedCaption\n      );\n      this.captionSource = node.outerHTML;\n      const { finalCanvas, captionImg } = this.elements;\n      const frame = this.frameData.find(frame => frame.untilTime >= t);\n      const context = finalCanvas.getContext('2d');\n      context.drawImage(frame.canvas, 0, 0);\n      context.drawImage(captionImg, 0, 0);\n      if (this.isRecording && this.timeSeconds > 0) {\n        this.gifRenderer.addFrame(this.elements.finalCanvas, {\n          copy: true,\n          delay: Math.floor(1000 * this.frameSeconds),\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');\n@import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');\n.caption {\n  font-size: 60px;\n  font-family: Anton, Impact, sans-serif;\n  font-weight: bold;\n  fill: yellow;\n  stroke-width: 1.5;\n  stroke: black;\n  text-anchor: middle;\n  dominant-baseline: center;\n}\n.with-border {\n  border: 1px solid black;\n  display: block;\n  margin: 1em auto;\n}\nimg, svg, input, pre {\n  display: block;\n  margin: 1.5em auto 1.5em auto !important;\n}\n\n.number {\n  background-color: inherit !important;\n  font-size: inherit !important;\n  margin: inherit !important;\n  padding: inherit !important;\n  height: inherit !important;\n}\n.caption-source {\n  max-width: 100%;\n  font-size: 10px;\n  color: darkblue;\n  overflow-y: scroll;\n  height: 270px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n#gif-frames-canvas {\n  border: 1px solid black;\n}\nbutton {\n  width: auto !important;\n}\n.emoji {\n  display: inline-block;\n  height: 1.5em;\n}\n#gif-draw-canvas, #final-canvas, #rendered-gif {\n  max-width: 100%;\n}\nsvg {\n  max-width: 100%;\n  max-height: 100%;\n}\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./Content.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Content.vue?vue&type=template&id=3fae70b8&lang=pug&\"\nimport script from \"./Content.vue?vue&type=script&lang=js&\"\nexport * from \"./Content.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Content.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"social-sharing-badges\"},_vm._l((_vm.networks),function(network){return _c('ShareNetwork',{key:network.network,style:({backgroundColor: network.color}),attrs:{\"network\":network.network,\"url\":_vm.sharing.url,\"title\":_vm.sharing.title,\"description\":_vm.sharing.description,\"quote\":_vm.sharing.quote,\"hashtags\":_vm.sharing.hashtags,\"twitterUser\":_vm.sharing.twitterUser}},[_c('i',{class:network.icon}),_c('span',[_vm._v(_vm._s(network.name))])])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template lang=\"pug\">\n.social-sharing-badges\n  ShareNetwork(\n    v-for=\"network in networks\"\n    :network=\"network.network\"\n    :key=\"network.network\"\n    :style=\"{backgroundColor: network.color}\"\n    :url=\"sharing.url\"\n    :title=\"sharing.title\"\n    :description=\"sharing.description\"\n    :quote=\"sharing.quote\"\n    :hashtags=\"sharing.hashtags\"\n    :twitterUser=\"sharing.twitterUser\"\n  )\n    i(:class=\"network.icon\")\n    span {{ network.name }}\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      sharing: {\n        url: 'https://zulko.github.io/gif-captioning-with-css/',\n        title: 'In-browser GIF captioning with 3D CSS animations',\n        description: \"Let's put some CSS animations in a GIF!\",\n        quote: 'https://zulko.github.io/gif-captioning-with-css/',\n        hashtags: 'GIF,CSS,hack',\n      },\n      networks: [\n        {\n          network: 'email',\n          name: 'Email',\n          icon: 'far fah fa-lg fa-envelope',\n          color: '#333333',\n        },\n        {\n          network: 'twitter',\n          name: 'Twitter',\n          icon: 'fab fah fa-lg fa-twitter',\n          color: '#1da1f2',\n        },\n        {\n          network: 'reddit',\n          name: 'Reddit',\n          icon: 'fab fah fa-lg fa-reddit-alien',\n          color: '#ff4500',\n        },\n        {\n          network: 'hackernews',\n          name: 'HackerNews',\n          icon: 'fab fah fa-lg fa-hacker-news',\n          color: '#ff4000',\n        },\n        {\n          network: 'whatsapp',\n          name: 'Whatsapp',\n          icon: 'fab fah fa-lg fa-whatsapp',\n          color: '#25d366',\n        },\n        {\n          network: 'linkedin',\n          name: 'LinkedIn',\n          icon: 'fab fah fa-lg fa-linkedin',\n          color: '#007bb5',\n        },\n        {\n          network: 'facebook',\n          name: 'Facebook',\n          icon: 'fab fah fa-lg fa-facebook-f',\n          color: '#1877f2',\n        },\n        {\n          network: 'vk',\n          name: 'Vk',\n          icon: 'fab fah fa-lg fa-vk',\n          color: '#4a76a8',\n        },\n        {\n          network: 'weibo',\n          name: 'Weibo',\n          icon: 'fab fah fa-lg fa-weibo',\n          color: '#e9152d',\n        },\n      ],\n    };\n  },\n};\n</script>\n\n<style>\n.social-sharing-badges {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  justify-content: center;\n  max-width: 1000px;\n  margin: auto;\n}\n.social-sharing-badges  a {\n  flex: none;\n  color: #FFFFFF;\n  background-color: #333;\n  border-radius: 3px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: row;\n  align-content: center;\n  align-items: center;\n  cursor: pointer;\n  margin: 0 10px 10px 0;\n  font-size: 0.8em;\n}\n.social-sharing-badges a .fah {\n  background-color: rgba(0, 0, 0, 0.2);\n  padding: 5px;\n  flex: 0 1 auto;\n}\n.social-sharing-badges a span {\n  padding: 0 10px;\n  flex: 1 1 0%;\n  font-weight: 500;\n}\n\n</style>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialSharingBadges.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialSharingBadges.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SocialSharingBadges.vue?vue&type=template&id=c481b94c&lang=pug&\"\nimport script from \"./SocialSharingBadges.vue?vue&type=script&lang=js&\"\nexport * from \"./SocialSharingBadges.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SocialSharingBadges.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template lang='pug'>\n#app\n  page-content\n  .footer.\n    Copyright Zulko 2021 - This page's code is\n    #[a(href='https://github.com/Zulko/gif-captioning-with-css') on Github]\n    and published under the MIT licence.\n    The page is styled with #[a(href='https://picocss.com/') PicoCSS] which works great.\n    If you know other people who are into GIFs and CSS, consider sharing!\n  social-sharing-badges(style='margin-top: 3em;')\n</template>\n\n<script>\nimport Content from './Content.vue';\nimport SocialSharingBadges from './SocialSharingBadges.vue';\n\nexport default {\n  name: 'App',\n  components: {\n    'page-content': Content,\n    'social-sharing-badges': SocialSharingBadges,\n  },\n};\n</script>\n\n<style>\n#app {\n  width: 800px;\n  max-width: 90%;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  margin: 60px auto;\n}\n.footer {\n  margin-top: 3em;\n  color: gray\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=75a6cfb1&lang=pug&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport \"@picocss/pico/css/pico.css\";\nimport VueSocialSharing from \"vue-social-sharing\";\n\nVue.use(VueSocialSharing);\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: (h) => h(App),\n}).$mount(\"#app\");\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./SocialSharingBadges.vue?vue&type=style&index=0&lang=css&\"","export default \"onRecordButtonClicked() {\\n  const self = this;\\n  this.gifRenderer = new GIF({\\n    workers: 4,\\n    workerScript: gifWorker,\\n    quality: 1,\\n    width: this.gifWidth,\\n    height: this.gifHeight,\\n    fps: 1.0 / this.frameSeconds,\\n  });\\n  this.gifRenderer.on('finished', blob => {\\n    self.isRendering = false;\\n    const reader = new window.FileReader();\\n    reader.readAsDataURL(blob);\\n    reader.onloadend = () => {\\n        self.renderedGif = reader.result;\\n    };\\n  });\\n  this.isRecording = true;\\n  this.timeSeconds = -0.5; // rewind and leave some time\\n},\";","export default \"function cloneWithInlineStyle(node) {\\n  var newNode = node.cloneNode(false);\\n  if (![\\\"defs\\\", \\\"style\\\"].some((tagName) => tagName === node.tagName)) {\\n    newNode.setAttribute(\\\"style\\\", computedStyle(node));\\n  }\\n  while (newNode.firstChild) {\\n    newNode.removeChild(newNode.firstChild);\\n  }\\n  if (node && node.hasChildNodes()) {\\n    var child = node.firstChild;\\n    while (child) {\\n      if (child.nodeType === 1 && child.nodeName !== \\\"SCRIPT\\\") {\\n        newNode.appendChild(cloneWithInlineStyle(child));\\n      } else {\\n        newNode.appendChild(child.cloneNode());\\n      }\\n      child = child.nextSibling;\\n    }\\n  }\\n  return newNode;\\n}\";","export default \"<svg>\\n  <g>\\n    <text class=\\\"caption animate__animated animate__jackInTheBox\\\">\\n      CHEERS!\\n    </text>\\n  </g>\\n</svg>\";","export default \"import gifFrames from 'gif-frames';\\n\\nfunction onGifLoad() {\\n  const self = this;\\n  gifFrames(\\n    {\\n      url: self.gifURL,\\n      frames: 'all',\\n      outputType: 'canvas',\\n      cumulative: true,\\n    },\\n    (_error, frameData) => {\\n      let cumulativeTime = 0;\\n      self.frameData = frameData.map(frame => {\\n        cumulativeTime += frame.frameInfo.delay / 100;\\n        return { untilTime: cumulativeTime, canvas: frame.getImage() };\\n      });\\n      self.gifWidth = self.frameData[0].canvas.width;\\n      self.gifHeight = self.frameData[0].canvas.height;\\n      self.gifDurationSeconds = cumulativeTime;\\n    }\\n  );\\n}\\n\";","export default \"<transition\\n  enter-active-class='animate__animated animate__bounceIn'\\n  leave-active-class='animate__animated animate__flipOutY'\\n>\\n  <text class=\\\"caption\\\" v-if='timeSeconds > 0.5 && timeSeconds < 2'>\\n    {{caption}}\\n  </text>\\n</transition>\";","export default \"<b-input v-model='caption'/>\\n<svg :viewBox=\\\"`0 0 ${gifWidth} ${gifHeight}`\\\">\\n  <g :style=\\\"`transform: translate(${captionX}px, ${captionY}px)`\\\">\\n    <text class='caption'>{{caption}}</text>\\n  </g>\\n</svg>\";","export default \"<h4 class=\\\"animate__animated animate__hearbeat animate__infinite\\\">\\n  BOOM\\n</h4>\";","export default \"watch: {\\n  timeSeconds(t) {\\n    ...\\n    context.drawImage(frame.canvas, 0, 0);\\n    context.drawImage(captionImg, 0, 0);\\n    if (this.isRecording && this.timeSeconds > 0) {\\n      this.gifRenderer.addFrame(this.elements.finalCanvas, {\\n        copy: true,\\n        delay: Math.floor(1000 * this.frameSeconds),\\n      });\\n    }\\n  }\\n}\";","export default \"function computedStyle(node) {\\n  const computedStyles = getComputedStyle(node);\\n  var includedAttributes = [\\n    \\\"font-family\\\",\\n    \\\"font-size\\\",\\n    \\\"transform\\\",\\n    \\\"perspective\\\",\\n    \\\"opacity\\\",\\n    // ... and many more\\n  ];\\n  return Object.values(computedStyles)\\n    .filter((key) => includedAttributes.indexOf(key) >= 0)\\n    .map((key) => `${key}:${computedStyles.getPropertyValue(key)};`)\\n    .join(\\\"\\\");\\n}\";","export default \"const context = canvas.getContext('2d')\\nconst myImage = document.getElementById('myImageId')\\ncontext.drawImage(myImage, 0, 0)\";","export default \"mounted() {\\n  const self = this;\\n  setInterval(() => {\\n    let newTime = self.timeSeconds + self.frameSeconds;\\n    if (newTime > self.gifDurationSeconds) {\\n      newTime -= self.gifDurationSeconds; // rewind to the start\\n    }\\n    self.timeSeconds = newTime;\\n  }, 1000 * self.frameSeconds);\\n}\";","export default \"<svg>\\n  <g>\\n    <text style=\\\"\\n      transform:matrix(1, 0.035, -0.0352955, 1, 0, 0);\\n      transform-origin:22.3px 18.7px;fill:rgb(255, 255, 0);\\n      perspective-origin:0.703125px 0px;\\n      ...\\n    \\\">\\n      CHEERS!\\n    </text>\\n  </g>\\n</svg>\";","export default \"setInterval(() => {\\n  let newTime = self.timeSeconds + self.frameSeconds;\\n  if (newTime > self.gifDurationSeconds) {\\n    newTime -= self.gifDurationSeconds;\\n    if (self.isRecording) {\\n      self.isRecording = false;\\n      self.isRendering = true;\\n      self.gifRenderer.render();\\n    }\\n  }\\n   self.timeSeconds = newTime;\\n  }, 1000 * self.frameSeconds);\";","export default \"@import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');\\n\\n.caption {\\n  font-size: 60px;\\n  font-family: Anton;\\n  fill: yellow;\\n  stroke-width: 1.5;\\n  stroke: black;\\n  text-anchor: middle;\\n  dominant-baseline: center;\\n}\";","export default \"mounted() {\\n  const gifDrawCanvas = document.getElementById('gif-draw-canvas');\\n  const gifDrawCanvasContext = gifDrawCanvas.getContext('2d');\\n  // Refresh the canvas by projecting the GIF every 2 seconds\\n  setInterval(() => {\\n    gifDrawCanvasContext.drawImage(this.elements.gifImg, 0, 0);\\n  }, 2000);\\n}\";","export default \"captionImgSrc() {\\n  const dataUrl = encodeURIComponent(\\n    `<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n    ${this.captionSource}`\\n  )\\n  .replace(/'/g, '%27')\\n  .replace(/\\\"/g, '%22');\\n  return `data:image/svg+xml,${dataUrl}`;\\n}\";"],"sourceRoot":""}