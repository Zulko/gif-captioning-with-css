(function(e){function t(t){for(var n,l,d=t[0],o=t[1],s=t[2],m=0,h=[];m<d.length;m++)l=d[m],Object.prototype.hasOwnProperty.call(i,l)&&i[l]&&h.push(i[l][0]),i[l]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);r&&r(t);while(h.length)h.shift()();return c.push.apply(c,s||[]),a()}function a(){for(var e,t=0;t<c.length;t++){for(var a=c[t],n=!0,d=1;d<a.length;d++){var o=a[d];0!==i[o]&&(n=!1)}n&&(c.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},c=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/gif-captioning-with-css/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],o=d.push.bind(d);d.push=t,d=d.slice();for(var s=0;s<d.length;s++)t(d[s]);var r=o;c.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0e34":function(e,t,a){"use strict";a.r(t),t["default"]='<input v-model="gifURL"/>\n<img :src="gifURL"/>'},1:function(e,t){},"14a0":function(e,t,a){"use strict";a.r(t),t["default"]=" watch: {\n  timeSeconds(t) {\n    const node = inlineSVGStyle.cloneWithInlineStyle(\n      this.elements.animatedCaption\n    );\n    this.captionSource = node.outerHTML;\n  }\n}"},2:function(e,t){},"27a2":function(e,t,a){"use strict";a("9f8a")},"27d2":function(e,t,a){"use strict";a.r(t),t["default"]="watch: {\n  timeSeconds(t) {\n    const node = inlineSVGStyle.cloneWithInlineStyle(\n        this.elements.animatedCaption\n      );\n    this.captionSource = node.outerHTML;\n    const { finalCanvas, captionImg } = this.elements;\n    const frame = this.frameData.find(frame => frame.untilTime >= t);\n    const context = finalCanvas.getContext('2d');\n    context.drawImage(frame.canvas, 0, 0);\n    context.drawImage(captionImg, 0, 0);\n  }\n}"},"2e54":function(e,t,a){"use strict";a.r(t),t["default"]='<img :src="gifURL" @load="onGifLoad"/>'},3:function(e,t){},"422b":function(e,t,a){"use strict";a.r(t),t["default"]="<canvas id='gif-draw-canvas' :width='gifWidth' :height='gifHeight'></canvas>"},"42a3":function(e,t,a){"use strict";a.r(t),t["default"]='<img src="caption-img" :src="captionImgSrc" :width="gifWidth" />'},"510f":function(e,t,a){"use strict";a("9590")},5575:function(e,t,a){"use strict";a.r(t),t["default"]="<button\n    @click='onRecordButtonClicked'\n    :disabled='isRecording || isRendering'\n> Render the gif\n</button>"},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("page-content"),e._m(0),a("social-sharing-badges",{staticStyle:{"margin-top":"3em"}})],1)},c=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"footer"},[e._v("Copyright Zulko 2021 - This page's code is "),a("a",{attrs:{href:"https://github.com/Zulko/gif-captioning-with-css"}},[e._v("on Github")]),e._v(" and published under the MIT licence. The page is styled with "),a("a",{attrs:{href:"https://picocss.com/"}},[e._v("PicoCSS")]),e._v(" which works great. If you know other people who are into GIFs and CSS, consider sharing!")])}],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h1",{staticClass:"title"},[e._v("In-browser GIF captioning with 3D CSS animations")]),a("p",[e._v("In this page we'll create a GIF with a caption using 3D CSS animations generated by your browser! And we'll see a few particularities of browser SVG rendering along the way. ")]),a("img",{attrs:{src:"finalResult.gif"}}),a("h3",[e._v("TLDR; The plan")]),e._m(0),a("img",{staticStyle:{"max-width":"300px"},attrs:{src:"the-plan.png"}}),a("h3",[e._v("1. The GIF")]),a("p",[e._v("Enter a URL below or just leave the default: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.gifURL,expression:"gifURL"}],domProps:{value:e.gifURL},on:{input:function(t){t.target.composing||(e.gifURL=t.target.value)}}}),a("img",{attrs:{id:"gif-img",src:e.gifURL},on:{load:e.onGifLoad}}),a("p"),e._m(1),a("p"),a("code-snippet",{attrs:{name:"user-gif-img-simple"}}),a("h3",[e._v("2. Extracting frames from the GIF")]),a("p"),e._m(2),a("p"),a("code-snippet",{attrs:{name:"project-img-onto-canvas"}}),a("p"),e._m(3),a("p"),a("code-snippet",{attrs:{name:"gif-draw-canvas-html"}}),a("code-snippet",{attrs:{name:"gif-draw-canvas-js"}}),a("p"),e._m(4),a("p"),a("center",[a("canvas",{attrs:{id:"gif-draw-canvas",width:e.gifWidth,height:e.gifHeight}})]),a("p"),e._m(5),a("p"),a("code-snippet",{attrs:{name:"gif-loader-html"}}),a("code-snippet",{attrs:{name:"gif-loader-js"}}),a("p",[e._v("Now we have extracted each frame's canvas with the time at which they appear, and in the process we gleaned the GIF's width, height and duration. ")]),a("h3",[e._v("3. The caption")]),a("p",[e._v("Enter a caption below (or just leave the default): ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.caption,expression:"caption"}],attrs:{mode:"text"},domProps:{value:e.caption},on:{input:function(t){t.target.composing||(e.caption=t.target.value)}}}),a("p"),e._m(6),a("p"),a("code-snippet",{attrs:{name:"caption-svg-base"}}),a("code-snippet",{attrs:{name:"caption-css"}}),a("svg",{staticClass:"with-border",style:{width:e.gifWidth,height:e.gifHeight},attrs:{viewBox:"0 0 "+e.gifWidth+" "+e.gifHeight,width:e.gifWidth,height:e.gifHeight}},[a("g",{style:"transform: translate("+e.captionX+"px, "+e.captionY+"px)"},[a("text",{staticClass:"caption"},[e._v(e._s(e.caption))])])]),a("h3",[e._v("4. Animating the caption")]),a("p",[e._v("First we'll create our clock, a time variable that loops through the duration of the GIF: ")]),a("code-snippet",{attrs:{name:"clock-js"}}),a("code-snippet",{attrs:{name:"clock-html"}}),a("center",[a("p",[e._v("Current time: "+e._s(e.timeSeconds.toFixed(2))+" seconds")])]),a("p",[e._v("Now we can make the caption blink on and off with a simple Vue condition:")]),a("code-snippet",{attrs:{name:"caption-blink-html"}}),a("svg",{staticClass:"with-border",style:{width:e.gifWidth,height:e.gifHeight},attrs:{viewBox:"0 0 "+e.gifWidth+" "+e.gifHeight,width:e.gifWidth,height:e.gifHeight}},[a("g",{style:"transform: translate("+e.captionX+"px, "+e.captionY+"px)"},[e.timeSeconds>.5&&e.timeSeconds<2?a("text",{staticClass:"caption"},[e._v(e._s(e.caption))]):e._e()])]),e._m(7),a("code-snippet",{attrs:{name:"animate-example-css"}}),a("code-snippet",{attrs:{name:"animate-example"}}),a("center",[a("div",{staticStyle:{display:"block","text-align":"center",width:"200px",height:"50px"}},[a("h4",{staticClass:"animate__animated animate__heartBeat animate__infinite"},[e._v("BOOM")])])]),a("p"),e._m(8),a("p"),a("code-snippet",{attrs:{name:"animated-svg"}}),a("p",[e._v("The result will look slighlty different on Chrome/Firefox/Safari, as each browser handles 3D CSS transforms differently: ")]),a("svg",{staticClass:"with-border",style:{width:e.gifWidth,height:e.gifHeight},attrs:{id:"animated-caption",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 "+e.gifWidth+" "+e.gifHeight,width:e.gifWidth,height:e.gifHeight}},[a("g",{style:"transform: translate("+e.captionX+"px, "+e.captionY+"px)"},[a("transition",{attrs:{"enter-active-class":"animate__animated animate__jackInTheBox animate__flipInX","leave-active-class":"animate__animated animate__backOutUp"}},[e.timeSeconds>.5&&e.timeSeconds<2?a("text",{staticClass:"caption"},[e._v(e._s(e.caption))]):e._e()])],1)]),a("p",[e._v("And just like that, we have our animation. ")]),a("h3",[e._v("5. The hard part: SVG snapshots")]),a("p"),a("p",[e._v("Your browser has two very distinct ways of displaying SVG images:")]),e._m(9),e._m(10),a("p",[e._v("The first step will be to go from the original SVG definition, which looks like this:")]),a("p"),a("code-snippet",{attrs:{name:"text-with-classes"}}),a("p"),e._m(11),a("p"),a("code-snippet",{attrs:{name:"text-with-styles"}}),a("p"),e._m(12),a("p"),a("code-snippet",{attrs:{name:"computed-style"}}),a("p"),e._m(13),a("p"),a("code-snippet",{attrs:{name:"inline-style"}}),a("p",[e._v("Now let's record the computed style of the SVG above at every tick of the clock:")]),a("code-snippet",{attrs:{name:"compute-style-loop"}}),e._m(14),a("pre",[a("code",{staticClass:"caption-source"},[e._v(e._s(e.formattedCaptionSource))])]),a("p"),e._m(15),a("p"),a("code-snippet",{attrs:{name:"captionImgSrc"}}),a("code-snippet",{attrs:{name:"captionImg-html"}}),a("p"),e._m(16),a("p"),a("img",{attrs:{id:"caption-img",src:e.captionImgSrc,width:e.gifWidth}}),a("p"),e._m(17),e._m(18),a("p"),a("h3",[e._v("GIF and caption come together")]),a("p"),e._m(19),a("p"),a("code-snippet",{attrs:{name:"merge-gif-and-caption"}}),a("center",[a("canvas",{attrs:{id:"final-canvas",width:e.gifWidth,height:e.gifHeight}})]),a("h3",[e._v("Final step: rendering the GIF")]),a("p"),e._m(20),a("p",[e._v("For this demo we'll have the renderer's creation triggered with a button.")]),a("p"),a("code-snippet",{attrs:{name:"onRecordButtonClicked-html"}}),a("p"),e._m(21),a("p"),a("code-snippet",{attrs:{name:"onRecordButtonClicked"}}),a("code-snippet",{attrs:{name:"rendered-gif-html"}}),a("p",[e._v("Then we modify the main loop so that every frame gets sent to the GIF renderer:")]),a("code-snippet",{attrs:{name:"recording-main-loop"}}),a("p",[e._v("And when the GIF has played once in its entirety, the frame recording stops, and the renderer can start actually generating the GIF. We do so by modifying the clock's loop: ")]),a("code-snippet",{attrs:{name:"render-gif"}}),e._m(22),a("center",[a("button",{attrs:{disabled:e.isRecording||e.isRendering},on:{click:e.onRecordButtonClicked}},[e._v("Render the gif")])]),e.isRecording?a("p",[e._v("Recording the frames...")]):e._e(),e.isRendering?a("p",[e._v("Rendering the GIF (may hang on mobile phones)...")]):e._e(),!e.renderedGif||e.isRecording||e.isRendering?e._e():a("p",[e._v("Here's your rendered GIF!")]),e.renderedGif?a("img",{attrs:{id:"rendered-gif",src:e.renderedGif}}):e._e(),a("h3",[e._v("Conclusion")]),a("p"),a("p",[e._v("It is fascinating that browsers and JS frameworks have evolved to the point where styling a GIF with CSS is possible. Some time ago I started developing a browser-based GIF captioning app around this trick, but as the project went forward I realized the lack of font support and differences in 3D CSS rendering between browsers were going to be a pain. So I removed the CSS animation feature altogether, and created this demo page instead.")]),e._m(23),a("p")],1)},d=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("We will first load a GIF from the internet, and separately create a CSS-animated caption in SVG format. Every few milliseconds, we'll extract a frame from the GIF (we'll just use a library for that), and a snapshot from the animated SVG caption (that's the hard part!). Then we'll combine GIF and caption on a canvas, and send the final frames to "),a("a",{attrs:{href:"https://jnordberg.github.io/gif.js/"}},[e._v("GIF.js")]),e._v(" for GIF generation. ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("I'll try to be transparent with what's running behind the scenes. This page (full code "),a("a",{attrs:{href:"https://github.com/Zulko/gif-captioning-with-css/blob/main/src/Content.vue"}},[e._v("here")]),e._v(") is written using the VueJS framework, which provides easy ways to manage events, variables and CSS classes, but could totally be replaced by React or basic Javascript for this demo. Here is the code for the text input field and image above:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("If you want to project the content of an "),a("code",[e._v("<img>")]),e._v(" onto a HTML canvas, you'll use the "),a("code",[e._v("drawImage")]),e._v(" method:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Even better, if you want to project the current frame of a "),a("code",[e._v("<video>")]),e._v(", you'll simply write "),a("code",[e._v("drawImage(myVideo)")]),e._v(". Now let's try the same technique to extract frames from the GIF above:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("It just doesn't work, the "),a("code",[e._v("<canvas>")]),e._v(" keeps showing the GIF's first frame:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("That's because when applying "),a("code",[e._v("drawImage")]),e._v(", your browser will consider the GIF as an image file, look at the data, extract the first frame (it doesn't know which frame is currently playing on the page ), and draw it. The only workaround is to use a library like "),a("a",{attrs:{href:"https://www.npmjs.com/package/gif-frames"}},[e._v("gif-frames")]),e._v(" that will decode the GIF frames directly from the file, and draw them on separate canvas.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Let's embed this caption in a SVG tag with the same dimensions as the GIF. Note how I am placing the text using its parent group, rather than writing "),a("code",[e._v("<text x=100 y=100>")]),e._v(". This is so the animations can later be applied to the text only and not its coordinates.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Then we'll use "),a("a",{attrs:{href:"https://animate.style/",target:"_blank"}},[e._v("Animate.css")]),e._v(", a very practical CSS library with dozens of predefined animations. All you have to do is load the library and give a certain class to an element: ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("This will work particularly well with the VueJS framework, which lets you specify "),a("code",[e._v("<transition>")]),e._v(" classes for when your element appears and disappears:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[e._v("If the SVG is defined using a "),a("code",[e._v("<svg>")]),e._v(" tag, the browser considers the SVG and its components ("),a("code",[e._v("<text>")]),e._v(", "),a("code",[e._v("<g>")]),e._v(") as first-class components of the page: it will apply CSS properties (including CSS animations, and custom fonts loaded in the page), it can let you select the elements with the mouse, etc. The downside is that you can't draw these elements on a canvas with "),a("code",[e._v("drawImage()")])]),a("li",[e._v("If the SVG is loaded as "),a("code",[e._v("<image src='some.svg'/>")]),e._v(", the browser will render it using a separate SVG engine (which can understand CSS styles, but won't know CSS classes and animations defined in the page), and display the image's pixels in the browser. These can then be projected on a canvas with "),a("code",[e._v("drawImage()")]),e._v(".")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("See where this is going? We'll start from the animated "),a("code",[e._v("<svg>")]),e._v(' element above, and take SVG "snapshots" that we\'ll feed to a '),a("code",[e._v("<img src=...>")]),e._v(" element, so that they are canvas-compatible.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("And transform it so that it explicitly features the transformations the browser is applying to the "),a("code",[e._v("<text>")]),e._v(" at a given time point, and looks like this:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("a",{attrs:{href:"https://toucantoco.com/en/tech-blog/tech/capture-your-html"}},[e._v("This great blog post")]),e._v(" by Sophie Despeisse provides a function to capture all the browser-computed styles of a SVG. It is done in two parts. First you ask for computed styles via the browser's "),a("code",[e._v("getComputedStyle")]),e._v(" method:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Then you apply the method above recursively to all the components of your SVG ("),a("code",[e._v("<g>")]),e._v(", "),a("code",[e._v("<text>")]),e._v(", etc):")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("Here is a rendition of "),a("code",[e._v("captionSource")]),e._v(":")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("For our last step, we'll feed that whole text to an "),a("code",[e._v("<img/>")]),e._v(" tag as a "),a("em",[e._v("data URL")]),e._v(", which is of the form "),a("code",[e._v("src='data:image/svg+xml,$DATA'")]),e._v(". Note how the SVG data is sanitized ("),a("code",[e._v("'")]),e._v(" is replaced by its URL-equivalent "),a("code",[e._v("%22")]),e._v(") so it won't corrupt the file.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("And here is the final "),a("code",[e._v("<img/>")]),e._v(" whose "),a("code",[e._v("src")]),e._v(" is updated at each tick of the clock:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("If you don't have the "),a("a",{attrs:{href:"https://fonts.google.com/specimen/Anton"}},[a("em",[e._v("Anton")])]),e._v(" or "),a("em",[e._v("Impact")]),e._v(" font installed on your computer, you'll probably have a very different, "),a("em",[e._v("default")]),e._v(" font appear in the animation above. Again, this is because these pictures are generated by your browser using a separate SVG renderer which doesn't have access to the fonts loaded in this page. On the good news side, that renderer did take into account the 3D transforms, although 3D transforms are not officially part of the SVG standard.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("The (very useful) "),a("a",{attrs:{href:"https://www.npmjs.com/package/canvg"}},[e._v("CanVG")]),e._v(" library will render SVGs on a canvas using fonts loaded in the page. However, CanVG is limited to the standard SVG definition, and so won't take into account 3D transforms.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("At each tick of the clock, we will now project, on a same "),a("code",[e._v("<canvas>")]),e._v(", the GIF frame corresponding to the current time, and the current caption from the "),a("code",[e._v("<img>")]),e._v(" above:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("There are a couple Javascript frameworks for generating GIFs. "),a("a",{attrs:{href:"https://jnordberg.github.io/gif.js/"}},[e._v("GIF.js")]),e._v(" is my favorite. You first initialize a renderer, then send frames (images or canvas) to it, and finally trigger the GIF rendering.")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("When we create the renderer we set it up so that, upon completion, it writes the final GIF's data into a "),a("code",[e._v("renderedGif")]),e._v(" variable that is fed to an "),a("code",[e._v("<img>")]),e._v(" element:")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("That's it, we made it! Press the button! "),a("img",{staticClass:"emoji",attrs:{src:"https://emojis.slackmojis.com/emojis/images/1584725500/8268/blob-hype.gif"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v("On the bright side, this got me started on a new GIF editor that runs entirely in your browser, enables all kinds of GIF mixing and cropping and captioning and animating, and lets you share your projects for others to remix. It's called "),a("a",{attrs:{href:"https://zulko.github.io/gix"}},[e._v("Gix and you should totally check it out")]),e._v(".")])}],o=(a("d81d"),a("ac1f"),a("5319"),a("7db0"),a("e3ea")),s=a.n(o),r=a("e0c0"),m=a.n(r),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"code-snippet"},[a("div",{staticClass:"description"},[e._v("in "+e._s(e.snippets[e.name].language)+":")]),a("vue-code-highlight",{attrs:{language:e.snippets[e.name].language}},[e._v(e._s(e.snippets[e.name].content))])],1)},p=[],u=(a("b0c0"),a("d36c")),b=(a("4717"),{"animate-example":{language:"HTML",content:a("912c").default},"animate-example-css":{language:"CSS",content:"@import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');"},"animated-svg":{language:"HTML",content:a("7afe").default},"caption-svg-base":{language:"HTML",content:a("87ea").default},"caption-css":{language:"CSS",content:a("e971").default},"caption-blink-js":{language:"Javascript",content:"mounted() { setInterval(() => {showCaption = !showCaption}, 2000)}"},"caption-blink-html":{language:"HTML",content:"<text class='caption' v-if='timeSeconds > 0.5 && timeSeconds < 2'> {{ caption }} </text>"},captionImgSrc:{language:"Javascript",content:a("f6dc").default},"captionImg-html":{language:"HTML",content:a("42a3").default},"clock-html":{language:"HTML",content:"Current time: {{ timeSeconds.toFixed(2) }} seconds"},"clock-js":{language:"Javascript",content:a("c63d").default},"computed-style":{language:"Javascript",content:a("bedd").default},"compute-style-loop":{language:"Javascript",content:a("14a0").default},"gif-draw-canvas-html":{language:"HTML",content:a("422b").default},"gif-draw-canvas-js":{language:"Javascript",content:a("ec7e").default},"gif-loader-html":{language:"HTML",content:a("2e54").default},"gif-loader-js":{language:"Javascript",content:a("735d").default},"inline-style":{language:"Javascript",content:a("7159").default},"merge-gif-and-caption":{language:"Javascript",content:a("27d2").default},onRecordButtonClicked:{language:"Javascript",content:a("6c67").default},"onRecordButtonClicked-html":{language:"HTML",content:a("5575").default},"project-img-onto-canvas":{language:"Javascript",content:a("c4b6").default},"recording-main-loop":{language:"Javascript",content:a("9f2a").default},"rendered-gif-html":{language:"HTML",content:"<img :src='renderedGif'/>"},"render-gif":{language:"Javascript",content:a("d512").default},"text-with-classes":{language:"SVG",content:a("728c").default},"text-with-styles":{language:"SVG",content:a("c64f").default},"user-gif-img-simple":{language:"HTML",content:a("0e34").default}}),Z={props:{name:{type:String}},data:function(){return b[this.name]||console.error("".concat(this.name," not in snippets")),{snippets:b}},components:{VueCodeHighlight:u["a"]}},G=Z,X=(a("510f"),a("2877")),f=Object(X["a"])(G,h,p,!1,null,null,null),g=f.exports;a("a15b"),a("4de4"),a("07ac"),a("99af");function W(e){var t=getComputedStyle(e),a=["font-family","font-size","font-weight","fill","stroke","stroke-color","stroke-width","style","text-anchor","alignment-baseline","transform","transform-origin","perspective","perspective-origin","opacity"];return Object.values(t).filter((function(e){return a.indexOf(e)>=0})).map((function(e){return"".concat(e,":").concat(t.getPropertyValue(e),";")})).join("")}function y(e){var t=e.cloneNode(!1);["defs","style"].some((function(t){return t===e.tagName}))||t.setAttribute("style",W(e));while(t.firstChild)t.removeChild(t.firstChild);if(e&&e.hasChildNodes()){var a=e.firstChild;while(a)1===a.nodeType&&"SCRIPT"!==a.nodeName?t.appendChild(y(a)):t.appendChild(a.cloneNode()),a=a.nextSibling}return t}var v={cloneWithInlineStyle:y},V=a("cd40"),R=a.n(V),Y="data:text/plain;charset=utf-8;base64,Ly8gZ2lmLndvcmtlci5qcyAwLjIuMCAtIGh0dHBzOi8vZ2l0aHViLmNvbS9qbm9yZGJlcmcvZ2lmLmpzCihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK28rIiciKTt0aHJvdyBmLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09ImZ1bmN0aW9uIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBOZXVRdWFudD1yZXF1aXJlKCIuL1R5cGVkTmV1UXVhbnQuanMiKTt2YXIgTFpXRW5jb2Rlcj1yZXF1aXJlKCIuL0xaV0VuY29kZXIuanMiKTtmdW5jdGlvbiBCeXRlQXJyYXkoKXt0aGlzLnBhZ2U9LTE7dGhpcy5wYWdlcz1bXTt0aGlzLm5ld1BhZ2UoKX1CeXRlQXJyYXkucGFnZVNpemU9NDA5NjtCeXRlQXJyYXkuY2hhck1hcD17fTtmb3IodmFyIGk9MDtpPDI1NjtpKyspQnl0ZUFycmF5LmNoYXJNYXBbaV09U3RyaW5nLmZyb21DaGFyQ29kZShpKTtCeXRlQXJyYXkucHJvdG90eXBlLm5ld1BhZ2U9ZnVuY3Rpb24oKXt0aGlzLnBhZ2VzWysrdGhpcy5wYWdlXT1uZXcgVWludDhBcnJheShCeXRlQXJyYXkucGFnZVNpemUpO3RoaXMuY3Vyc29yPTB9O0J5dGVBcnJheS5wcm90b3R5cGUuZ2V0RGF0YT1mdW5jdGlvbigpe3ZhciBydj0iIjtmb3IodmFyIHA9MDtwPHRoaXMucGFnZXMubGVuZ3RoO3ArKyl7Zm9yKHZhciBpPTA7aTxCeXRlQXJyYXkucGFnZVNpemU7aSsrKXtydis9Qnl0ZUFycmF5LmNoYXJNYXBbdGhpcy5wYWdlc1twXVtpXV19fXJldHVybiBydn07Qnl0ZUFycmF5LnByb3RvdHlwZS53cml0ZUJ5dGU9ZnVuY3Rpb24odmFsKXtpZih0aGlzLmN1cnNvcj49Qnl0ZUFycmF5LnBhZ2VTaXplKXRoaXMubmV3UGFnZSgpO3RoaXMucGFnZXNbdGhpcy5wYWdlXVt0aGlzLmN1cnNvcisrXT12YWx9O0J5dGVBcnJheS5wcm90b3R5cGUud3JpdGVVVEZCeXRlcz1mdW5jdGlvbihzdHJpbmcpe2Zvcih2YXIgbD1zdHJpbmcubGVuZ3RoLGk9MDtpPGw7aSsrKXRoaXMud3JpdGVCeXRlKHN0cmluZy5jaGFyQ29kZUF0KGkpKX07Qnl0ZUFycmF5LnByb3RvdHlwZS53cml0ZUJ5dGVzPWZ1bmN0aW9uKGFycmF5LG9mZnNldCxsZW5ndGgpe2Zvcih2YXIgbD1sZW5ndGh8fGFycmF5Lmxlbmd0aCxpPW9mZnNldHx8MDtpPGw7aSsrKXRoaXMud3JpdGVCeXRlKGFycmF5W2ldKX07ZnVuY3Rpb24gR0lGRW5jb2Rlcih3aWR0aCxoZWlnaHQpe3RoaXMud2lkdGg9fn53aWR0aDt0aGlzLmhlaWdodD1+fmhlaWdodDt0aGlzLnRyYW5zcGFyZW50PW51bGw7dGhpcy50cmFuc0luZGV4PTA7dGhpcy5yZXBlYXQ9LTE7dGhpcy5kZWxheT0wO3RoaXMuaW1hZ2U9bnVsbDt0aGlzLnBpeGVscz1udWxsO3RoaXMuaW5kZXhlZFBpeGVscz1udWxsO3RoaXMuY29sb3JEZXB0aD1udWxsO3RoaXMuY29sb3JUYWI9bnVsbDt0aGlzLm5ldVF1YW50PW51bGw7dGhpcy51c2VkRW50cnk9bmV3IEFycmF5O3RoaXMucGFsU2l6ZT03O3RoaXMuZGlzcG9zZT0tMTt0aGlzLmZpcnN0RnJhbWU9dHJ1ZTt0aGlzLnNhbXBsZT0xMDt0aGlzLmRpdGhlcj1mYWxzZTt0aGlzLmdsb2JhbFBhbGV0dGU9ZmFsc2U7dGhpcy5vdXQ9bmV3IEJ5dGVBcnJheX1HSUZFbmNvZGVyLnByb3RvdHlwZS5zZXREZWxheT1mdW5jdGlvbihtaWxsaXNlY29uZHMpe3RoaXMuZGVsYXk9TWF0aC5yb3VuZChtaWxsaXNlY29uZHMvMTApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXRGcmFtZVJhdGU9ZnVuY3Rpb24oZnBzKXt0aGlzLmRlbGF5PU1hdGgucm91bmQoMTAwL2Zwcyl9O0dJRkVuY29kZXIucHJvdG90eXBlLnNldERpc3Bvc2U9ZnVuY3Rpb24oZGlzcG9zYWxDb2RlKXtpZihkaXNwb3NhbENvZGU+PTApdGhpcy5kaXNwb3NlPWRpc3Bvc2FsQ29kZX07R0lGRW5jb2Rlci5wcm90b3R5cGUuc2V0UmVwZWF0PWZ1bmN0aW9uKHJlcGVhdCl7dGhpcy5yZXBlYXQ9cmVwZWF0fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXRUcmFuc3BhcmVudD1mdW5jdGlvbihjb2xvcil7dGhpcy50cmFuc3BhcmVudD1jb2xvcn07R0lGRW5jb2Rlci5wcm90b3R5cGUuYWRkRnJhbWU9ZnVuY3Rpb24oaW1hZ2VEYXRhKXt0aGlzLmltYWdlPWltYWdlRGF0YTt0aGlzLmNvbG9yVGFiPXRoaXMuZ2xvYmFsUGFsZXR0ZSYmdGhpcy5nbG9iYWxQYWxldHRlLnNsaWNlP3RoaXMuZ2xvYmFsUGFsZXR0ZTpudWxsO3RoaXMuZ2V0SW1hZ2VQaXhlbHMoKTt0aGlzLmFuYWx5emVQaXhlbHMoKTtpZih0aGlzLmdsb2JhbFBhbGV0dGU9PT10cnVlKXRoaXMuZ2xvYmFsUGFsZXR0ZT10aGlzLmNvbG9yVGFiO2lmKHRoaXMuZmlyc3RGcmFtZSl7dGhpcy53cml0ZUxTRCgpO3RoaXMud3JpdGVQYWxldHRlKCk7aWYodGhpcy5yZXBlYXQ+PTApe3RoaXMud3JpdGVOZXRzY2FwZUV4dCgpfX10aGlzLndyaXRlR3JhcGhpY0N0cmxFeHQoKTt0aGlzLndyaXRlSW1hZ2VEZXNjKCk7aWYoIXRoaXMuZmlyc3RGcmFtZSYmIXRoaXMuZ2xvYmFsUGFsZXR0ZSl0aGlzLndyaXRlUGFsZXR0ZSgpO3RoaXMud3JpdGVQaXhlbHMoKTt0aGlzLmZpcnN0RnJhbWU9ZmFsc2V9O0dJRkVuY29kZXIucHJvdG90eXBlLmZpbmlzaD1mdW5jdGlvbigpe3RoaXMub3V0LndyaXRlQnl0ZSg1OSl9O0dJRkVuY29kZXIucHJvdG90eXBlLnNldFF1YWxpdHk9ZnVuY3Rpb24ocXVhbGl0eSl7aWYocXVhbGl0eTwxKXF1YWxpdHk9MTt0aGlzLnNhbXBsZT1xdWFsaXR5fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5zZXREaXRoZXI9ZnVuY3Rpb24oZGl0aGVyKXtpZihkaXRoZXI9PT10cnVlKWRpdGhlcj0iRmxveWRTdGVpbmJlcmciO3RoaXMuZGl0aGVyPWRpdGhlcn07R0lGRW5jb2Rlci5wcm90b3R5cGUuc2V0R2xvYmFsUGFsZXR0ZT1mdW5jdGlvbihwYWxldHRlKXt0aGlzLmdsb2JhbFBhbGV0dGU9cGFsZXR0ZX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZ2V0R2xvYmFsUGFsZXR0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdsb2JhbFBhbGV0dGUmJnRoaXMuZ2xvYmFsUGFsZXR0ZS5zbGljZSYmdGhpcy5nbG9iYWxQYWxldHRlLnNsaWNlKDApfHx0aGlzLmdsb2JhbFBhbGV0dGV9O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKCl7dGhpcy5vdXQud3JpdGVVVEZCeXRlcygiR0lGODlhIil9O0dJRkVuY29kZXIucHJvdG90eXBlLmFuYWx5emVQaXhlbHM9ZnVuY3Rpb24oKXtpZighdGhpcy5jb2xvclRhYil7dGhpcy5uZXVRdWFudD1uZXcgTmV1UXVhbnQodGhpcy5waXhlbHMsdGhpcy5zYW1wbGUpO3RoaXMubmV1UXVhbnQuYnVpbGRDb2xvcm1hcCgpO3RoaXMuY29sb3JUYWI9dGhpcy5uZXVRdWFudC5nZXRDb2xvcm1hcCgpfWlmKHRoaXMuZGl0aGVyKXt0aGlzLmRpdGhlclBpeGVscyh0aGlzLmRpdGhlci5yZXBsYWNlKCItc2VycGVudGluZSIsIiIpLHRoaXMuZGl0aGVyLm1hdGNoKC8tc2VycGVudGluZS8pIT09bnVsbCl9ZWxzZXt0aGlzLmluZGV4UGl4ZWxzKCl9dGhpcy5waXhlbHM9bnVsbDt0aGlzLmNvbG9yRGVwdGg9ODt0aGlzLnBhbFNpemU9NztpZih0aGlzLnRyYW5zcGFyZW50IT09bnVsbCl7dGhpcy50cmFuc0luZGV4PXRoaXMuZmluZENsb3Nlc3QodGhpcy50cmFuc3BhcmVudCx0cnVlKX19O0dJRkVuY29kZXIucHJvdG90eXBlLmluZGV4UGl4ZWxzPWZ1bmN0aW9uKGltZ3Epe3ZhciBuUGl4PXRoaXMucGl4ZWxzLmxlbmd0aC8zO3RoaXMuaW5kZXhlZFBpeGVscz1uZXcgVWludDhBcnJheShuUGl4KTt2YXIgaz0wO2Zvcih2YXIgaj0wO2o8blBpeDtqKyspe3ZhciBpbmRleD10aGlzLmZpbmRDbG9zZXN0UkdCKHRoaXMucGl4ZWxzW2srK10mMjU1LHRoaXMucGl4ZWxzW2srK10mMjU1LHRoaXMucGl4ZWxzW2srK10mMjU1KTt0aGlzLnVzZWRFbnRyeVtpbmRleF09dHJ1ZTt0aGlzLmluZGV4ZWRQaXhlbHNbal09aW5kZXh9fTtHSUZFbmNvZGVyLnByb3RvdHlwZS5kaXRoZXJQaXhlbHM9ZnVuY3Rpb24oa2VybmVsLHNlcnBlbnRpbmUpe3ZhciBrZXJuZWxzPXtGYWxzZUZsb3lkU3RlaW5iZXJnOltbMy84LDEsMF0sWzMvOCwwLDFdLFsyLzgsMSwxXV0sRmxveWRTdGVpbmJlcmc6W1s3LzE2LDEsMF0sWzMvMTYsLTEsMV0sWzUvMTYsMCwxXSxbMS8xNiwxLDFdXSxTdHVja2k6W1s4LzQyLDEsMF0sWzQvNDIsMiwwXSxbMi80MiwtMiwxXSxbNC80MiwtMSwxXSxbOC80MiwwLDFdLFs0LzQyLDEsMV0sWzIvNDIsMiwxXSxbMS80MiwtMiwyXSxbMi80MiwtMSwyXSxbNC80MiwwLDJdLFsyLzQyLDEsMl0sWzEvNDIsMiwyXV0sQXRraW5zb246W1sxLzgsMSwwXSxbMS84LDIsMF0sWzEvOCwtMSwxXSxbMS84LDAsMV0sWzEvOCwxLDFdLFsxLzgsMCwyXV19O2lmKCFrZXJuZWx8fCFrZXJuZWxzW2tlcm5lbF0pe3Rocm93IlVua25vd24gZGl0aGVyaW5nIGtlcm5lbDogIitrZXJuZWx9dmFyIGRzPWtlcm5lbHNba2VybmVsXTt2YXIgaW5kZXg9MCxoZWlnaHQ9dGhpcy5oZWlnaHQsd2lkdGg9dGhpcy53aWR0aCxkYXRhPXRoaXMucGl4ZWxzO3ZhciBkaXJlY3Rpb249c2VycGVudGluZT8tMToxO3RoaXMuaW5kZXhlZFBpeGVscz1uZXcgVWludDhBcnJheSh0aGlzLnBpeGVscy5sZW5ndGgvMyk7Zm9yKHZhciB5PTA7eTxoZWlnaHQ7eSsrKXtpZihzZXJwZW50aW5lKWRpcmVjdGlvbj1kaXJlY3Rpb24qLTE7Zm9yKHZhciB4PWRpcmVjdGlvbj09MT8wOndpZHRoLTEseGVuZD1kaXJlY3Rpb249PTE/d2lkdGg6MDt4IT09eGVuZDt4Kz1kaXJlY3Rpb24pe2luZGV4PXkqd2lkdGgreDt2YXIgaWR4PWluZGV4KjM7dmFyIHIxPWRhdGFbaWR4XTt2YXIgZzE9ZGF0YVtpZHgrMV07dmFyIGIxPWRhdGFbaWR4KzJdO2lkeD10aGlzLmZpbmRDbG9zZXN0UkdCKHIxLGcxLGIxKTt0aGlzLnVzZWRFbnRyeVtpZHhdPXRydWU7dGhpcy5pbmRleGVkUGl4ZWxzW2luZGV4XT1pZHg7aWR4Kj0zO3ZhciByMj10aGlzLmNvbG9yVGFiW2lkeF07dmFyIGcyPXRoaXMuY29sb3JUYWJbaWR4KzFdO3ZhciBiMj10aGlzLmNvbG9yVGFiW2lkeCsyXTt2YXIgZXI9cjEtcjI7dmFyIGVnPWcxLWcyO3ZhciBlYj1iMS1iMjtmb3IodmFyIGk9ZGlyZWN0aW9uPT0xPzA6ZHMubGVuZ3RoLTEsZW5kPWRpcmVjdGlvbj09MT9kcy5sZW5ndGg6MDtpIT09ZW5kO2krPWRpcmVjdGlvbil7dmFyIHgxPWRzW2ldWzFdO3ZhciB5MT1kc1tpXVsyXTtpZih4MSt4Pj0wJiZ4MSt4PHdpZHRoJiZ5MSt5Pj0wJiZ5MSt5PGhlaWdodCl7dmFyIGQ9ZHNbaV1bMF07aWR4PWluZGV4K3gxK3kxKndpZHRoO2lkeCo9MztkYXRhW2lkeF09TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsZGF0YVtpZHhdK2VyKmQpKTtkYXRhW2lkeCsxXT1NYXRoLm1heCgwLE1hdGgubWluKDI1NSxkYXRhW2lkeCsxXStlZypkKSk7ZGF0YVtpZHgrMl09TWF0aC5tYXgoMCxNYXRoLm1pbigyNTUsZGF0YVtpZHgrMl0rZWIqZCkpfX19fX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZmluZENsb3Nlc3Q9ZnVuY3Rpb24oYyx1c2VkKXtyZXR1cm4gdGhpcy5maW5kQ2xvc2VzdFJHQigoYyYxNjcxMTY4MCk+PjE2LChjJjY1MjgwKT4+OCxjJjI1NSx1c2VkKX07R0lGRW5jb2Rlci5wcm90b3R5cGUuZmluZENsb3Nlc3RSR0I9ZnVuY3Rpb24ocixnLGIsdXNlZCl7aWYodGhpcy5jb2xvclRhYj09PW51bGwpcmV0dXJuLTE7aWYodGhpcy5uZXVRdWFudCYmIXVzZWQpe3JldHVybiB0aGlzLm5ldVF1YW50Lmxvb2t1cFJHQihyLGcsYil9dmFyIGM9YnxnPDw4fHI8PDE2O3ZhciBtaW5wb3M9MDt2YXIgZG1pbj0yNTYqMjU2KjI1Njt2YXIgbGVuPXRoaXMuY29sb3JUYWIubGVuZ3RoO2Zvcih2YXIgaT0wLGluZGV4PTA7aTxsZW47aW5kZXgrKyl7dmFyIGRyPXItKHRoaXMuY29sb3JUYWJbaSsrXSYyNTUpO3ZhciBkZz1nLSh0aGlzLmNvbG9yVGFiW2krK10mMjU1KTt2YXIgZGI9Yi0odGhpcy5jb2xvclRhYltpKytdJjI1NSk7dmFyIGQ9ZHIqZHIrZGcqZGcrZGIqZGI7aWYoKCF1c2VkfHx0aGlzLnVzZWRFbnRyeVtpbmRleF0pJiZkPGRtaW4pe2RtaW49ZDttaW5wb3M9aW5kZXh9fXJldHVybiBtaW5wb3N9O0dJRkVuY29kZXIucHJvdG90eXBlLmdldEltYWdlUGl4ZWxzPWZ1bmN0aW9uKCl7dmFyIHc9dGhpcy53aWR0aDt2YXIgaD10aGlzLmhlaWdodDt0aGlzLnBpeGVscz1uZXcgVWludDhBcnJheSh3KmgqMyk7dmFyIGRhdGE9dGhpcy5pbWFnZTt2YXIgc3JjUG9zPTA7dmFyIGNvdW50PTA7Zm9yKHZhciBpPTA7aTxoO2krKyl7Zm9yKHZhciBqPTA7ajx3O2orKyl7dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107dGhpcy5waXhlbHNbY291bnQrK109ZGF0YVtzcmNQb3MrK107c3JjUG9zKyt9fX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVHcmFwaGljQ3RybEV4dD1mdW5jdGlvbigpe3RoaXMub3V0LndyaXRlQnl0ZSgzMyk7dGhpcy5vdXQud3JpdGVCeXRlKDI0OSk7dGhpcy5vdXQud3JpdGVCeXRlKDQpO3ZhciB0cmFuc3AsZGlzcDtpZih0aGlzLnRyYW5zcGFyZW50PT09bnVsbCl7dHJhbnNwPTA7ZGlzcD0wfWVsc2V7dHJhbnNwPTE7ZGlzcD0yfWlmKHRoaXMuZGlzcG9zZT49MCl7ZGlzcD1kaXNwb3NlJjd9ZGlzcDw8PTI7dGhpcy5vdXQud3JpdGVCeXRlKDB8ZGlzcHwwfHRyYW5zcCk7dGhpcy53cml0ZVNob3J0KHRoaXMuZGVsYXkpO3RoaXMub3V0LndyaXRlQnl0ZSh0aGlzLnRyYW5zSW5kZXgpO3RoaXMub3V0LndyaXRlQnl0ZSgwKX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVJbWFnZURlc2M9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGUoNDQpO3RoaXMud3JpdGVTaG9ydCgwKTt0aGlzLndyaXRlU2hvcnQoMCk7dGhpcy53cml0ZVNob3J0KHRoaXMud2lkdGgpO3RoaXMud3JpdGVTaG9ydCh0aGlzLmhlaWdodCk7aWYodGhpcy5maXJzdEZyYW1lfHx0aGlzLmdsb2JhbFBhbGV0dGUpe3RoaXMub3V0LndyaXRlQnl0ZSgwKX1lbHNle3RoaXMub3V0LndyaXRlQnl0ZSgxMjh8MHwwfDB8dGhpcy5wYWxTaXplKX19O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlTFNEPWZ1bmN0aW9uKCl7dGhpcy53cml0ZVNob3J0KHRoaXMud2lkdGgpO3RoaXMud3JpdGVTaG9ydCh0aGlzLmhlaWdodCk7dGhpcy5vdXQud3JpdGVCeXRlKDEyOHwxMTJ8MHx0aGlzLnBhbFNpemUpO3RoaXMub3V0LndyaXRlQnl0ZSgwKTt0aGlzLm91dC53cml0ZUJ5dGUoMCl9O0dJRkVuY29kZXIucHJvdG90eXBlLndyaXRlTmV0c2NhcGVFeHQ9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGUoMzMpO3RoaXMub3V0LndyaXRlQnl0ZSgyNTUpO3RoaXMub3V0LndyaXRlQnl0ZSgxMSk7dGhpcy5vdXQud3JpdGVVVEZCeXRlcygiTkVUU0NBUEUyLjAiKTt0aGlzLm91dC53cml0ZUJ5dGUoMyk7dGhpcy5vdXQud3JpdGVCeXRlKDEpO3RoaXMud3JpdGVTaG9ydCh0aGlzLnJlcGVhdCk7dGhpcy5vdXQud3JpdGVCeXRlKDApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS53cml0ZVBhbGV0dGU9ZnVuY3Rpb24oKXt0aGlzLm91dC53cml0ZUJ5dGVzKHRoaXMuY29sb3JUYWIpO3ZhciBuPTMqMjU2LXRoaXMuY29sb3JUYWIubGVuZ3RoO2Zvcih2YXIgaT0wO2k8bjtpKyspdGhpcy5vdXQud3JpdGVCeXRlKDApfTtHSUZFbmNvZGVyLnByb3RvdHlwZS53cml0ZVNob3J0PWZ1bmN0aW9uKHBWYWx1ZSl7dGhpcy5vdXQud3JpdGVCeXRlKHBWYWx1ZSYyNTUpO3RoaXMub3V0LndyaXRlQnl0ZShwVmFsdWU+PjgmMjU1KX07R0lGRW5jb2Rlci5wcm90b3R5cGUud3JpdGVQaXhlbHM9ZnVuY3Rpb24oKXt2YXIgZW5jPW5ldyBMWldFbmNvZGVyKHRoaXMud2lkdGgsdGhpcy5oZWlnaHQsdGhpcy5pbmRleGVkUGl4ZWxzLHRoaXMuY29sb3JEZXB0aCk7ZW5jLmVuY29kZSh0aGlzLm91dCl9O0dJRkVuY29kZXIucHJvdG90eXBlLnN0cmVhbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm91dH07bW9kdWxlLmV4cG9ydHM9R0lGRW5jb2Rlcn0seyIuL0xaV0VuY29kZXIuanMiOjIsIi4vVHlwZWROZXVRdWFudC5qcyI6M31dLDI6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBFT0Y9LTE7dmFyIEJJVFM9MTI7dmFyIEhTSVpFPTUwMDM7dmFyIG1hc2tzPVswLDEsMyw3LDE1LDMxLDYzLDEyNywyNTUsNTExLDEwMjMsMjA0Nyw0MDk1LDgxOTEsMTYzODMsMzI3NjcsNjU1MzVdO2Z1bmN0aW9uIExaV0VuY29kZXIod2lkdGgsaGVpZ2h0LHBpeGVscyxjb2xvckRlcHRoKXt2YXIgaW5pdENvZGVTaXplPU1hdGgubWF4KDIsY29sb3JEZXB0aCk7dmFyIGFjY3VtPW5ldyBVaW50OEFycmF5KDI1Nik7dmFyIGh0YWI9bmV3IEludDMyQXJyYXkoSFNJWkUpO3ZhciBjb2RldGFiPW5ldyBJbnQzMkFycmF5KEhTSVpFKTt2YXIgY3VyX2FjY3VtLGN1cl9iaXRzPTA7dmFyIGFfY291bnQ7dmFyIGZyZWVfZW50PTA7dmFyIG1heGNvZGU7dmFyIGNsZWFyX2ZsZz1mYWxzZTt2YXIgZ19pbml0X2JpdHMsQ2xlYXJDb2RlLEVPRkNvZGU7ZnVuY3Rpb24gY2hhcl9vdXQoYyxvdXRzKXthY2N1bVthX2NvdW50KytdPWM7aWYoYV9jb3VudD49MjU0KWZsdXNoX2NoYXIob3V0cyl9ZnVuY3Rpb24gY2xfYmxvY2sob3V0cyl7Y2xfaGFzaChIU0laRSk7ZnJlZV9lbnQ9Q2xlYXJDb2RlKzI7Y2xlYXJfZmxnPXRydWU7b3V0cHV0KENsZWFyQ29kZSxvdXRzKX1mdW5jdGlvbiBjbF9oYXNoKGhzaXplKXtmb3IodmFyIGk9MDtpPGhzaXplOysraSlodGFiW2ldPS0xfWZ1bmN0aW9uIGNvbXByZXNzKGluaXRfYml0cyxvdXRzKXt2YXIgZmNvZGUsYyxpLGVudCxkaXNwLGhzaXplX3JlZyxoc2hpZnQ7Z19pbml0X2JpdHM9aW5pdF9iaXRzO2NsZWFyX2ZsZz1mYWxzZTtuX2JpdHM9Z19pbml0X2JpdHM7bWF4Y29kZT1NQVhDT0RFKG5fYml0cyk7Q2xlYXJDb2RlPTE8PGluaXRfYml0cy0xO0VPRkNvZGU9Q2xlYXJDb2RlKzE7ZnJlZV9lbnQ9Q2xlYXJDb2RlKzI7YV9jb3VudD0wO2VudD1uZXh0UGl4ZWwoKTtoc2hpZnQ9MDtmb3IoZmNvZGU9SFNJWkU7ZmNvZGU8NjU1MzY7ZmNvZGUqPTIpKytoc2hpZnQ7aHNoaWZ0PTgtaHNoaWZ0O2hzaXplX3JlZz1IU0laRTtjbF9oYXNoKGhzaXplX3JlZyk7b3V0cHV0KENsZWFyQ29kZSxvdXRzKTtvdXRlcl9sb29wOndoaWxlKChjPW5leHRQaXhlbCgpKSE9RU9GKXtmY29kZT0oYzw8QklUUykrZW50O2k9Yzw8aHNoaWZ0XmVudDtpZihodGFiW2ldPT09ZmNvZGUpe2VudD1jb2RldGFiW2ldO2NvbnRpbnVlfWVsc2UgaWYoaHRhYltpXT49MCl7ZGlzcD1oc2l6ZV9yZWctaTtpZihpPT09MClkaXNwPTE7ZG97aWYoKGktPWRpc3ApPDApaSs9aHNpemVfcmVnO2lmKGh0YWJbaV09PT1mY29kZSl7ZW50PWNvZGV0YWJbaV07Y29udGludWUgb3V0ZXJfbG9vcH19d2hpbGUoaHRhYltpXT49MCl9b3V0cHV0KGVudCxvdXRzKTtlbnQ9YztpZihmcmVlX2VudDwxPDxCSVRTKXtjb2RldGFiW2ldPWZyZWVfZW50Kys7aHRhYltpXT1mY29kZX1lbHNle2NsX2Jsb2NrKG91dHMpfX1vdXRwdXQoZW50LG91dHMpO291dHB1dChFT0ZDb2RlLG91dHMpfWZ1bmN0aW9uIGVuY29kZShvdXRzKXtvdXRzLndyaXRlQnl0ZShpbml0Q29kZVNpemUpO3JlbWFpbmluZz13aWR0aCpoZWlnaHQ7Y3VyUGl4ZWw9MDtjb21wcmVzcyhpbml0Q29kZVNpemUrMSxvdXRzKTtvdXRzLndyaXRlQnl0ZSgwKX1mdW5jdGlvbiBmbHVzaF9jaGFyKG91dHMpe2lmKGFfY291bnQ+MCl7b3V0cy53cml0ZUJ5dGUoYV9jb3VudCk7b3V0cy53cml0ZUJ5dGVzKGFjY3VtLDAsYV9jb3VudCk7YV9jb3VudD0wfX1mdW5jdGlvbiBNQVhDT0RFKG5fYml0cyl7cmV0dXJuKDE8PG5fYml0cyktMX1mdW5jdGlvbiBuZXh0UGl4ZWwoKXtpZihyZW1haW5pbmc9PT0wKXJldHVybiBFT0Y7LS1yZW1haW5pbmc7dmFyIHBpeD1waXhlbHNbY3VyUGl4ZWwrK107cmV0dXJuIHBpeCYyNTV9ZnVuY3Rpb24gb3V0cHV0KGNvZGUsb3V0cyl7Y3VyX2FjY3VtJj1tYXNrc1tjdXJfYml0c107aWYoY3VyX2JpdHM+MCljdXJfYWNjdW18PWNvZGU8PGN1cl9iaXRzO2Vsc2UgY3VyX2FjY3VtPWNvZGU7Y3VyX2JpdHMrPW5fYml0czt3aGlsZShjdXJfYml0cz49OCl7Y2hhcl9vdXQoY3VyX2FjY3VtJjI1NSxvdXRzKTtjdXJfYWNjdW0+Pj04O2N1cl9iaXRzLT04fWlmKGZyZWVfZW50Pm1heGNvZGV8fGNsZWFyX2ZsZyl7aWYoY2xlYXJfZmxnKXttYXhjb2RlPU1BWENPREUobl9iaXRzPWdfaW5pdF9iaXRzKTtjbGVhcl9mbGc9ZmFsc2V9ZWxzZXsrK25fYml0cztpZihuX2JpdHM9PUJJVFMpbWF4Y29kZT0xPDxCSVRTO2Vsc2UgbWF4Y29kZT1NQVhDT0RFKG5fYml0cyl9fWlmKGNvZGU9PUVPRkNvZGUpe3doaWxlKGN1cl9iaXRzPjApe2NoYXJfb3V0KGN1cl9hY2N1bSYyNTUsb3V0cyk7Y3VyX2FjY3VtPj49ODtjdXJfYml0cy09OH1mbHVzaF9jaGFyKG91dHMpfX10aGlzLmVuY29kZT1lbmNvZGV9bW9kdWxlLmV4cG9ydHM9TFpXRW5jb2Rlcn0se31dLDM6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe3ZhciBuY3ljbGVzPTEwMDt2YXIgbmV0c2l6ZT0yNTY7dmFyIG1heG5ldHBvcz1uZXRzaXplLTE7dmFyIG5ldGJpYXNzaGlmdD00O3ZhciBpbnRiaWFzc2hpZnQ9MTY7dmFyIGludGJpYXM9MTw8aW50Ymlhc3NoaWZ0O3ZhciBnYW1tYXNoaWZ0PTEwO3ZhciBnYW1tYT0xPDxnYW1tYXNoaWZ0O3ZhciBiZXRhc2hpZnQ9MTA7dmFyIGJldGE9aW50Ymlhcz4+YmV0YXNoaWZ0O3ZhciBiZXRhZ2FtbWE9aW50Ymlhczw8Z2FtbWFzaGlmdC1iZXRhc2hpZnQ7dmFyIGluaXRyYWQ9bmV0c2l6ZT4+Mzt2YXIgcmFkaXVzYmlhc3NoaWZ0PTY7dmFyIHJhZGl1c2JpYXM9MTw8cmFkaXVzYmlhc3NoaWZ0O3ZhciBpbml0cmFkaXVzPWluaXRyYWQqcmFkaXVzYmlhczt2YXIgcmFkaXVzZGVjPTMwO3ZhciBhbHBoYWJpYXNzaGlmdD0xMDt2YXIgaW5pdGFscGhhPTE8PGFscGhhYmlhc3NoaWZ0O3ZhciBhbHBoYWRlYzt2YXIgcmFkYmlhc3NoaWZ0PTg7dmFyIHJhZGJpYXM9MTw8cmFkYmlhc3NoaWZ0O3ZhciBhbHBoYXJhZGJzaGlmdD1hbHBoYWJpYXNzaGlmdCtyYWRiaWFzc2hpZnQ7dmFyIGFscGhhcmFkYmlhcz0xPDxhbHBoYXJhZGJzaGlmdDt2YXIgcHJpbWUxPTQ5OTt2YXIgcHJpbWUyPTQ5MTt2YXIgcHJpbWUzPTQ4Nzt2YXIgcHJpbWU0PTUwMzt2YXIgbWlucGljdHVyZWJ5dGVzPTMqcHJpbWU0O2Z1bmN0aW9uIE5ldVF1YW50KHBpeGVscyxzYW1wbGVmYWMpe3ZhciBuZXR3b3JrO3ZhciBuZXRpbmRleDt2YXIgYmlhczt2YXIgZnJlcTt2YXIgcmFkcG93ZXI7ZnVuY3Rpb24gaW5pdCgpe25ldHdvcms9W107bmV0aW5kZXg9bmV3IEludDMyQXJyYXkoMjU2KTtiaWFzPW5ldyBJbnQzMkFycmF5KG5ldHNpemUpO2ZyZXE9bmV3IEludDMyQXJyYXkobmV0c2l6ZSk7cmFkcG93ZXI9bmV3IEludDMyQXJyYXkobmV0c2l6ZT4+Myk7dmFyIGksdjtmb3IoaT0wO2k8bmV0c2l6ZTtpKyspe3Y9KGk8PG5ldGJpYXNzaGlmdCs4KS9uZXRzaXplO25ldHdvcmtbaV09bmV3IEZsb2F0NjRBcnJheShbdix2LHYsMF0pO2ZyZXFbaV09aW50Ymlhcy9uZXRzaXplO2JpYXNbaV09MH19ZnVuY3Rpb24gdW5iaWFzbmV0KCl7Zm9yKHZhciBpPTA7aTxuZXRzaXplO2krKyl7bmV0d29ya1tpXVswXT4+PW5ldGJpYXNzaGlmdDtuZXR3b3JrW2ldWzFdPj49bmV0Ymlhc3NoaWZ0O25ldHdvcmtbaV1bMl0+Pj1uZXRiaWFzc2hpZnQ7bmV0d29ya1tpXVszXT1pfX1mdW5jdGlvbiBhbHRlcnNpbmdsZShhbHBoYSxpLGIsZyxyKXtuZXR3b3JrW2ldWzBdLT1hbHBoYSoobmV0d29ya1tpXVswXS1iKS9pbml0YWxwaGE7bmV0d29ya1tpXVsxXS09YWxwaGEqKG5ldHdvcmtbaV1bMV0tZykvaW5pdGFscGhhO25ldHdvcmtbaV1bMl0tPWFscGhhKihuZXR3b3JrW2ldWzJdLXIpL2luaXRhbHBoYX1mdW5jdGlvbiBhbHRlcm5laWdoKHJhZGl1cyxpLGIsZyxyKXt2YXIgbG89TWF0aC5hYnMoaS1yYWRpdXMpO3ZhciBoaT1NYXRoLm1pbihpK3JhZGl1cyxuZXRzaXplKTt2YXIgaj1pKzE7dmFyIGs9aS0xO3ZhciBtPTE7dmFyIHAsYTt3aGlsZShqPGhpfHxrPmxvKXthPXJhZHBvd2VyW20rK107aWYoajxoaSl7cD1uZXR3b3JrW2orK107cFswXS09YSoocFswXS1iKS9hbHBoYXJhZGJpYXM7cFsxXS09YSoocFsxXS1nKS9hbHBoYXJhZGJpYXM7cFsyXS09YSoocFsyXS1yKS9hbHBoYXJhZGJpYXN9aWYoaz5sbyl7cD1uZXR3b3JrW2stLV07cFswXS09YSoocFswXS1iKS9hbHBoYXJhZGJpYXM7cFsxXS09YSoocFsxXS1nKS9hbHBoYXJhZGJpYXM7cFsyXS09YSoocFsyXS1yKS9hbHBoYXJhZGJpYXN9fX1mdW5jdGlvbiBjb250ZXN0KGIsZyxyKXt2YXIgYmVzdGQ9figxPDwzMSk7dmFyIGJlc3RiaWFzZD1iZXN0ZDt2YXIgYmVzdHBvcz0tMTt2YXIgYmVzdGJpYXNwb3M9YmVzdHBvczt2YXIgaSxuLGRpc3QsYmlhc2Rpc3QsYmV0YWZyZXE7Zm9yKGk9MDtpPG5ldHNpemU7aSsrKXtuPW5ldHdvcmtbaV07ZGlzdD1NYXRoLmFicyhuWzBdLWIpK01hdGguYWJzKG5bMV0tZykrTWF0aC5hYnMoblsyXS1yKTtpZihkaXN0PGJlc3RkKXtiZXN0ZD1kaXN0O2Jlc3Rwb3M9aX1iaWFzZGlzdD1kaXN0LShiaWFzW2ldPj5pbnRiaWFzc2hpZnQtbmV0Ymlhc3NoaWZ0KTtpZihiaWFzZGlzdDxiZXN0Ymlhc2Qpe2Jlc3RiaWFzZD1iaWFzZGlzdDtiZXN0Ymlhc3Bvcz1pfWJldGFmcmVxPWZyZXFbaV0+PmJldGFzaGlmdDtmcmVxW2ldLT1iZXRhZnJlcTtiaWFzW2ldKz1iZXRhZnJlcTw8Z2FtbWFzaGlmdH1mcmVxW2Jlc3Rwb3NdKz1iZXRhO2JpYXNbYmVzdHBvc10tPWJldGFnYW1tYTtyZXR1cm4gYmVzdGJpYXNwb3N9ZnVuY3Rpb24gaW54YnVpbGQoKXt2YXIgaSxqLHAscSxzbWFsbHBvcyxzbWFsbHZhbCxwcmV2aW91c2NvbD0wLHN0YXJ0cG9zPTA7Zm9yKGk9MDtpPG5ldHNpemU7aSsrKXtwPW5ldHdvcmtbaV07c21hbGxwb3M9aTtzbWFsbHZhbD1wWzFdO2ZvcihqPWkrMTtqPG5ldHNpemU7aisrKXtxPW5ldHdvcmtbal07aWYocVsxXTxzbWFsbHZhbCl7c21hbGxwb3M9ajtzbWFsbHZhbD1xWzFdfX1xPW5ldHdvcmtbc21hbGxwb3NdO2lmKGkhPXNtYWxscG9zKXtqPXFbMF07cVswXT1wWzBdO3BbMF09ajtqPXFbMV07cVsxXT1wWzFdO3BbMV09ajtqPXFbMl07cVsyXT1wWzJdO3BbMl09ajtqPXFbM107cVszXT1wWzNdO3BbM109an1pZihzbWFsbHZhbCE9cHJldmlvdXNjb2wpe25ldGluZGV4W3ByZXZpb3VzY29sXT1zdGFydHBvcytpPj4xO2ZvcihqPXByZXZpb3VzY29sKzE7ajxzbWFsbHZhbDtqKyspbmV0aW5kZXhbal09aTtwcmV2aW91c2NvbD1zbWFsbHZhbDtzdGFydHBvcz1pfX1uZXRpbmRleFtwcmV2aW91c2NvbF09c3RhcnRwb3MrbWF4bmV0cG9zPj4xO2ZvcihqPXByZXZpb3VzY29sKzE7ajwyNTY7aisrKW5ldGluZGV4W2pdPW1heG5ldHBvc31mdW5jdGlvbiBpbnhzZWFyY2goYixnLHIpe3ZhciBhLHAsZGlzdDt2YXIgYmVzdGQ9MWUzO3ZhciBiZXN0PS0xO3ZhciBpPW5ldGluZGV4W2ddO3ZhciBqPWktMTt3aGlsZShpPG5ldHNpemV8fGo+PTApe2lmKGk8bmV0c2l6ZSl7cD1uZXR3b3JrW2ldO2Rpc3Q9cFsxXS1nO2lmKGRpc3Q+PWJlc3RkKWk9bmV0c2l6ZTtlbHNle2krKztpZihkaXN0PDApZGlzdD0tZGlzdDthPXBbMF0tYjtpZihhPDApYT0tYTtkaXN0Kz1hO2lmKGRpc3Q8YmVzdGQpe2E9cFsyXS1yO2lmKGE8MClhPS1hO2Rpc3QrPWE7aWYoZGlzdDxiZXN0ZCl7YmVzdGQ9ZGlzdDtiZXN0PXBbM119fX19aWYoaj49MCl7cD1uZXR3b3JrW2pdO2Rpc3Q9Zy1wWzFdO2lmKGRpc3Q+PWJlc3RkKWo9LTE7ZWxzZXtqLS07aWYoZGlzdDwwKWRpc3Q9LWRpc3Q7YT1wWzBdLWI7aWYoYTwwKWE9LWE7ZGlzdCs9YTtpZihkaXN0PGJlc3RkKXthPXBbMl0tcjtpZihhPDApYT0tYTtkaXN0Kz1hO2lmKGRpc3Q8YmVzdGQpe2Jlc3RkPWRpc3Q7YmVzdD1wWzNdfX19fX1yZXR1cm4gYmVzdH1mdW5jdGlvbiBsZWFybigpe3ZhciBpO3ZhciBsZW5ndGhjb3VudD1waXhlbHMubGVuZ3RoO3ZhciBhbHBoYWRlYz0zMCsoc2FtcGxlZmFjLTEpLzM7dmFyIHNhbXBsZXBpeGVscz1sZW5ndGhjb3VudC8oMypzYW1wbGVmYWMpO3ZhciBkZWx0YT1+fihzYW1wbGVwaXhlbHMvbmN5Y2xlcyk7dmFyIGFscGhhPWluaXRhbHBoYTt2YXIgcmFkaXVzPWluaXRyYWRpdXM7dmFyIHJhZD1yYWRpdXM+PnJhZGl1c2JpYXNzaGlmdDtpZihyYWQ8PTEpcmFkPTA7Zm9yKGk9MDtpPHJhZDtpKyspcmFkcG93ZXJbaV09YWxwaGEqKChyYWQqcmFkLWkqaSkqcmFkYmlhcy8ocmFkKnJhZCkpO3ZhciBzdGVwO2lmKGxlbmd0aGNvdW50PG1pbnBpY3R1cmVieXRlcyl7c2FtcGxlZmFjPTE7c3RlcD0zfWVsc2UgaWYobGVuZ3RoY291bnQlcHJpbWUxIT09MCl7c3RlcD0zKnByaW1lMX1lbHNlIGlmKGxlbmd0aGNvdW50JXByaW1lMiE9PTApe3N0ZXA9MypwcmltZTJ9ZWxzZSBpZihsZW5ndGhjb3VudCVwcmltZTMhPT0wKXtzdGVwPTMqcHJpbWUzfWVsc2V7c3RlcD0zKnByaW1lNH12YXIgYixnLHIsajt2YXIgcGl4PTA7aT0wO3doaWxlKGk8c2FtcGxlcGl4ZWxzKXtiPShwaXhlbHNbcGl4XSYyNTUpPDxuZXRiaWFzc2hpZnQ7Zz0ocGl4ZWxzW3BpeCsxXSYyNTUpPDxuZXRiaWFzc2hpZnQ7cj0ocGl4ZWxzW3BpeCsyXSYyNTUpPDxuZXRiaWFzc2hpZnQ7aj1jb250ZXN0KGIsZyxyKTthbHRlcnNpbmdsZShhbHBoYSxqLGIsZyxyKTtpZihyYWQhPT0wKWFsdGVybmVpZ2gocmFkLGosYixnLHIpO3BpeCs9c3RlcDtpZihwaXg+PWxlbmd0aGNvdW50KXBpeC09bGVuZ3RoY291bnQ7aSsrO2lmKGRlbHRhPT09MClkZWx0YT0xO2lmKGklZGVsdGE9PT0wKXthbHBoYS09YWxwaGEvYWxwaGFkZWM7cmFkaXVzLT1yYWRpdXMvcmFkaXVzZGVjO3JhZD1yYWRpdXM+PnJhZGl1c2JpYXNzaGlmdDtpZihyYWQ8PTEpcmFkPTA7Zm9yKGo9MDtqPHJhZDtqKyspcmFkcG93ZXJbal09YWxwaGEqKChyYWQqcmFkLWoqaikqcmFkYmlhcy8ocmFkKnJhZCkpfX19ZnVuY3Rpb24gYnVpbGRDb2xvcm1hcCgpe2luaXQoKTtsZWFybigpO3VuYmlhc25ldCgpO2lueGJ1aWxkKCl9dGhpcy5idWlsZENvbG9ybWFwPWJ1aWxkQ29sb3JtYXA7ZnVuY3Rpb24gZ2V0Q29sb3JtYXAoKXt2YXIgbWFwPVtdO3ZhciBpbmRleD1bXTtmb3IodmFyIGk9MDtpPG5ldHNpemU7aSsrKWluZGV4W25ldHdvcmtbaV1bM11dPWk7dmFyIGs9MDtmb3IodmFyIGw9MDtsPG5ldHNpemU7bCsrKXt2YXIgaj1pbmRleFtsXTttYXBbaysrXT1uZXR3b3JrW2pdWzBdO21hcFtrKytdPW5ldHdvcmtbal1bMV07bWFwW2srK109bmV0d29ya1tqXVsyXX1yZXR1cm4gbWFwfXRoaXMuZ2V0Q29sb3JtYXA9Z2V0Q29sb3JtYXA7dGhpcy5sb29rdXBSR0I9aW54c2VhcmNofW1vZHVsZS5leHBvcnRzPU5ldVF1YW50fSx7fV0sNDpbZnVuY3Rpb24ocmVxdWlyZSxtb2R1bGUsZXhwb3J0cyl7dmFyIEdJRkVuY29kZXIscmVuZGVyRnJhbWU7R0lGRW5jb2Rlcj1yZXF1aXJlKCIuL0dJRkVuY29kZXIuanMiKTtyZW5kZXJGcmFtZT1mdW5jdGlvbihmcmFtZSl7dmFyIGVuY29kZXIscGFnZSxzdHJlYW0sdHJhbnNmZXI7ZW5jb2Rlcj1uZXcgR0lGRW5jb2RlcihmcmFtZS53aWR0aCxmcmFtZS5oZWlnaHQpO2lmKGZyYW1lLmluZGV4PT09MCl7ZW5jb2Rlci53cml0ZUhlYWRlcigpfWVsc2V7ZW5jb2Rlci5maXJzdEZyYW1lPWZhbHNlfWVuY29kZXIuc2V0VHJhbnNwYXJlbnQoZnJhbWUudHJhbnNwYXJlbnQpO2VuY29kZXIuc2V0UmVwZWF0KGZyYW1lLnJlcGVhdCk7ZW5jb2Rlci5zZXREZWxheShmcmFtZS5kZWxheSk7ZW5jb2Rlci5zZXRRdWFsaXR5KGZyYW1lLnF1YWxpdHkpO2VuY29kZXIuc2V0RGl0aGVyKGZyYW1lLmRpdGhlcik7ZW5jb2Rlci5zZXRHbG9iYWxQYWxldHRlKGZyYW1lLmdsb2JhbFBhbGV0dGUpO2VuY29kZXIuYWRkRnJhbWUoZnJhbWUuZGF0YSk7aWYoZnJhbWUubGFzdCl7ZW5jb2Rlci5maW5pc2goKX1pZihmcmFtZS5nbG9iYWxQYWxldHRlPT09dHJ1ZSl7ZnJhbWUuZ2xvYmFsUGFsZXR0ZT1lbmNvZGVyLmdldEdsb2JhbFBhbGV0dGUoKX1zdHJlYW09ZW5jb2Rlci5zdHJlYW0oKTtmcmFtZS5kYXRhPXN0cmVhbS5wYWdlcztmcmFtZS5jdXJzb3I9c3RyZWFtLmN1cnNvcjtmcmFtZS5wYWdlU2l6ZT1zdHJlYW0uY29uc3RydWN0b3IucGFnZVNpemU7aWYoZnJhbWUuY2FuVHJhbnNmZXIpe3RyYW5zZmVyPWZ1bmN0aW9uKCl7dmFyIGksbGVuLHJlZixyZXN1bHRzO3JlZj1mcmFtZS5kYXRhO3Jlc3VsdHM9W107Zm9yKGk9MCxsZW49cmVmLmxlbmd0aDtpPGxlbjtpKyspe3BhZ2U9cmVmW2ldO3Jlc3VsdHMucHVzaChwYWdlLmJ1ZmZlcil9cmV0dXJuIHJlc3VsdHN9KCk7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoZnJhbWUsdHJhbnNmZXIpfWVsc2V7cmV0dXJuIHNlbGYucG9zdE1lc3NhZ2UoZnJhbWUpfX07c2VsZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZXZlbnQpe3JldHVybiByZW5kZXJGcmFtZShldmVudC5kYXRhKX19LHsiLi9HSUZFbmNvZGVyLmpzIjoxfV19LHt9LFs0XSk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWdpZi53b3JrZXIuanMubWFwCg==",w={data:function(){return{gifURL:"https://i.imgur.com/BF230Z2.gif",caption:"CHEERS!",captionX:95,captionY:100,gifWidth:200,gifHeight:200,gifDurationSeconds:2,frameSeconds:.03,timeSeconds:0,showCaption:!0,elements:null,captionSource:"",isRecording:!1,isRendering:!1,gifRenderer:null,renderedGif:null}},components:{"code-snippet":g},methods:{setCaptionSource:function(){var e=v.cloneWithInlineStyle(this.elements.animatedCaption);this.captionSource=e.outerHTML},onGifLoad:function(){var e=this;m()({url:e.gifURL,frames:"all",outputType:"canvas",cumulative:!0},(function(t,a){var n=0;e.frameData=a.map((function(e){return n+=e.frameInfo.delay/100,{untilTime:n,canvas:e.getImage()}})),e.gifWidth=e.frameData[0].canvas.width,e.gifHeight=e.frameData[0].canvas.height,e.gifDurationSeconds=n}))},onRecordButtonClicked:function(){var e=this;this.gifRenderer=new R.a({workers:4,workerScript:Y,quality:1,width:this.gifWidth,height:this.gifHeight,fps:1/this.frameSeconds}),this.gifRenderer.on("finished",(function(t){e.isRendering=!1;var a=new window.FileReader;a.readAsDataURL(t),a.onloadend=function(){e.renderedGif=a.result}})),this.isRecording=!0,this.timeSeconds=-.5}},computed:{formattedCaptionSource:function(){return s()(this.captionSource||"<xml></xml>")},captionImgSrc:function(){var e=encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>\n        '.concat(this.captionSource)).replace(/'/g,"%27").replace(/"/g,"%22");return"data:image/svg+xml,".concat(e)}},mounted:function(){var e=this,t=this;setInterval((function(){var e=t.timeSeconds+t.frameSeconds;e>t.gifDurationSeconds&&(e-=t.gifDurationSeconds,t.isRecording&&(t.isRecording=!1,t.isRendering=!0,t.gifRenderer.render())),t.timeSeconds=e}),1e3*t.frameSeconds),this.elements={gifImg:document.getElementById("gif-img"),animatedCaption:document.getElementById("animated-caption"),captionImg:document.getElementById("caption-img"),finalCanvas:document.getElementById("final-canvas")};var a=document.getElementById("gif-draw-canvas"),n=a.getContext("2d");setInterval((function(){n.drawImage(e.elements.gifImg,0,0)}),2e3)},watch:{timeSeconds:function(e){if(this.frameData){var t=v.cloneWithInlineStyle(this.elements.animatedCaption);this.captionSource=t.outerHTML;var a=this.elements,n=a.finalCanvas,i=a.captionImg,c=this.frameData.find((function(t){return t.untilTime>=e})),l=n.getContext("2d");l.drawImage(c.canvas,0,0),l.drawImage(i,0,0),this.isRecording&&this.timeSeconds>0&&this.gifRenderer.addFrame(this.elements.finalCanvas,{copy:!0,delay:Math.floor(1e3*this.frameSeconds)})}}}},F=w,x=(a("27a2"),Object(X["a"])(F,l,d,!1,null,null,null)),z=x.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"social-sharing-badges"},e._l(e.networks,(function(t){return a("ShareNetwork",{key:t.network,style:{backgroundColor:t.color},attrs:{network:t.network,url:e.sharing.url,title:e.sharing.title,description:e.sharing.description,quote:e.sharing.quote,hashtags:e.sharing.hashtags,twitterUser:e.sharing.twitterUser}},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.name))])])})),1)},I=[],S={data:function(){return{sharing:{url:"https://zulko.github.io/gif-captioning-with-css/",title:"In-browser GIF captioning with 3D CSS animations",description:"Let's put some CSS animations in a GIF!",quote:"https://zulko.github.io/gif-captioning-with-css/",hashtags:"GIF,CSS,hack"},networks:[{network:"email",name:"Email",icon:"far fah fa-lg fa-envelope",color:"#333333"},{network:"twitter",name:"Twitter",icon:"fab fah fa-lg fa-twitter",color:"#1da1f2"},{network:"reddit",name:"Reddit",icon:"fab fah fa-lg fa-reddit-alien",color:"#ff4500"},{network:"hackernews",name:"HackerNews",icon:"fab fah fa-lg fa-hacker-news",color:"#ff4000"},{network:"whatsapp",name:"Whatsapp",icon:"fab fah fa-lg fa-whatsapp",color:"#25d366"},{network:"linkedin",name:"LinkedIn",icon:"fab fah fa-lg fa-linkedin",color:"#007bb5"},{network:"facebook",name:"Facebook",icon:"fab fah fa-lg fa-facebook-f",color:"#1877f2"},{network:"vk",name:"Vk",icon:"fab fah fa-lg fa-vk",color:"#4a76a8"},{network:"weibo",name:"Weibo",icon:"fab fah fa-lg fa-weibo",color:"#e9152d"}]}}},T=S,J=(a("5a0f"),Object(X["a"])(T,k,I,!1,null,null,null)),M=J.exports,H={name:"App",components:{"page-content":z,"social-sharing-badges":M}},N=H,K=(a("034f"),Object(X["a"])(N,i,c,!1,null,null,null)),_=K.exports,L=(a("4bf3"),a("bd8c")),C=a.n(L);n["a"].use(C.a),n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(_)}}).$mount("#app")},"5a0f":function(e,t,a){"use strict";a("d5ec")},"6c67":function(e,t,a){"use strict";a.r(t),t["default"]="onRecordButtonClicked() {\n  const self = this;\n  this.gifRenderer = new GIF({\n    workers: 4,\n    workerScript: gifWorker,\n    quality: 1,\n    width: this.gifWidth,\n    height: this.gifHeight,\n    fps: 1.0 / this.frameSeconds,\n  });\n  this.gifRenderer.on('finished', blob => {\n    self.isRendering = false;\n    const reader = new window.FileReader();\n    reader.readAsDataURL(blob);\n    reader.onloadend = () => {\n        self.renderedGif = reader.result;\n    };\n  });\n  this.isRecording = true;\n  this.timeSeconds = -0.5; // rewind and leave some time\n},"},7159:function(e,t,a){"use strict";a.r(t),t["default"]='function cloneWithInlineStyle(node) {\n  var newNode = node.cloneNode(false);\n  if (!["defs", "style"].some((tagName) => tagName === node.tagName)) {\n    newNode.setAttribute("style", computedStyle(node));\n  }\n  while (newNode.firstChild) {\n    newNode.removeChild(newNode.firstChild);\n  }\n  if (node && node.hasChildNodes()) {\n    var child = node.firstChild;\n    while (child) {\n      if (child.nodeType === 1 && child.nodeName !== "SCRIPT") {\n        newNode.appendChild(cloneWithInlineStyle(child));\n      } else {\n        newNode.appendChild(child.cloneNode());\n      }\n      child = child.nextSibling;\n    }\n  }\n  return newNode;\n}'},"728c":function(e,t,a){"use strict";a.r(t),t["default"]='<svg>\n  <g>\n    <text class="caption animate__animated animate__jackInTheBox">\n      CHEERS!\n    </text>\n  </g>\n</svg>'},"735d":function(e,t,a){"use strict";a.r(t),t["default"]="import gifFrames from 'gif-frames';\n\nfunction onGifLoad() {\n  const self = this;\n  gifFrames(\n    {\n      url: self.gifURL,\n      frames: 'all',\n      outputType: 'canvas',\n      cumulative: true,\n    },\n    (_error, frameData) => {\n      let cumulativeTime = 0;\n      self.frameData = frameData.map(frame => {\n        cumulativeTime += frame.frameInfo.delay / 100;\n        return { untilTime: cumulativeTime, canvas: frame.getImage() };\n      });\n      self.gifWidth = self.frameData[0].canvas.width;\n      self.gifHeight = self.frameData[0].canvas.height;\n      self.gifDurationSeconds = cumulativeTime;\n    }\n  );\n}\n"},"7afe":function(e,t,a){"use strict";a.r(t),t["default"]="<transition\n  enter-active-class='animate__animated animate__bounceIn'\n  leave-active-class='animate__animated animate__flipOutY'\n>\n  <text class=\"caption\" v-if='timeSeconds > 0.5 && timeSeconds < 2'>\n    {{caption}}\n  </text>\n</transition>"},"85ec":function(e,t,a){},"87ea":function(e,t,a){"use strict";a.r(t),t["default"]="<b-input v-model='caption'/>\n<svg :viewBox=\"`0 0 ${gifWidth} ${gifHeight}`\">\n  <g :style=\"`transform: translate(${captionX}px, ${captionY}px)`\">\n    <text class='caption'>{{caption}}</text>\n  </g>\n</svg>"},"912c":function(e,t,a){"use strict";a.r(t),t["default"]='<h4 class="animate__animated animate__hearbeat animate__infinite">\n  BOOM\n</h4>'},9590:function(e,t,a){},"9f2a":function(e,t,a){"use strict";a.r(t),t["default"]="watch: {\n  timeSeconds(t) {\n    ...\n    context.drawImage(frame.canvas, 0, 0);\n    context.drawImage(captionImg, 0, 0);\n    if (this.isRecording && this.timeSeconds > 0) {\n      this.gifRenderer.addFrame(this.elements.finalCanvas, {\n        copy: true,\n        delay: Math.floor(1000 * this.frameSeconds),\n      });\n    }\n  }\n}"},"9f8a":function(e,t,a){},bedd:function(e,t,a){"use strict";a.r(t),t["default"]='function computedStyle(node) {\n  const computedStyles = getComputedStyle(node);\n  var includedAttributes = [\n    "font-family",\n    "font-size",\n    "transform",\n    "perspective",\n    "opacity",\n    // ... and many more\n  ];\n  return Object.values(computedStyles)\n    .filter((key) => includedAttributes.indexOf(key) >= 0)\n    .map((key) => `${key}:${computedStyles.getPropertyValue(key)};`)\n    .join("");\n}'},c4b6:function(e,t,a){"use strict";a.r(t),t["default"]="const context = canvas.getContext('2d')\nconst myImage = document.getElementById('myImageId')\ncontext.drawImage(myImage, 0, 0)"},c63d:function(e,t,a){"use strict";a.r(t),t["default"]="mounted() {\n  const self = this;\n  setInterval(() => {\n    let newTime = self.timeSeconds + self.frameSeconds;\n    if (newTime > self.gifDurationSeconds) {\n      newTime -= self.gifDurationSeconds; // rewind to the start\n    }\n    self.timeSeconds = newTime;\n  }, 1000 * self.frameSeconds);\n}"},c64f:function(e,t,a){"use strict";a.r(t),t["default"]='<svg>\n  <g>\n    <text style="\n      transform:matrix(1, 0.035, -0.0352955, 1, 0, 0);\n      transform-origin:22.3px 18.7px;fill:rgb(255, 255, 0);\n      perspective-origin:0.703125px 0px;\n      ...\n    ">\n      CHEERS!\n    </text>\n  </g>\n</svg>'},d512:function(e,t,a){"use strict";a.r(t),t["default"]="setInterval(() => {\n  let newTime = self.timeSeconds + self.frameSeconds;\n  if (newTime > self.gifDurationSeconds) {\n    newTime -= self.gifDurationSeconds;\n    if (self.isRecording) {\n      self.isRecording = false;\n      self.isRendering = true;\n      self.gifRenderer.render();\n    }\n  }\n   self.timeSeconds = newTime;\n  }, 1000 * self.frameSeconds);"},d5ec:function(e,t,a){},e971:function(e,t,a){"use strict";a.r(t),t["default"]="@import url('https://fonts.googleapis.com/css2?family=Anton&display=swap');\n\n.caption {\n  font-size: 60px;\n  font-family: Anton;\n  fill: yellow;\n  stroke-width: 1.5;\n  stroke: black;\n  text-anchor: middle;\n  dominant-baseline: center;\n}"},ec7e:function(e,t,a){"use strict";a.r(t),t["default"]="mounted() {\n  const gifDrawCanvas = document.getElementById('gif-draw-canvas');\n  const gifDrawCanvasContext = gifDrawCanvas.getContext('2d');\n  // Refresh the canvas by projecting the GIF every 2 seconds\n  setInterval(() => {\n    gifDrawCanvasContext.drawImage(this.elements.gifImg, 0, 0);\n  }, 2000);\n}"},f6dc:function(e,t,a){"use strict";a.r(t),t["default"]="captionImgSrc() {\n  const dataUrl = encodeURIComponent(\n    `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    ${this.captionSource}`\n  )\n  .replace(/'/g, '%27')\n  .replace(/\"/g, '%22');\n  return `data:image/svg+xml,${dataUrl}`;\n}"}});
//# sourceMappingURL=app.e9986dc3.js.map